<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
         â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•    â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â•šâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
         â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â•šâ–ˆâ–ˆâ•”â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•â• 
         â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     
         â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•    â•šâ•â•   â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•    â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•     
         
         ABYSS EXPLORER - Ultimate Browser-Based Fractal Explorer
         Version 1.0.0 | MIT License | https://github.com/abyss-explorer
         
         An infinitely deep journey into mathematical beauty.
         
         FEATURES:
         â€¢ 2D deep-zoom fractals using perturbation theory (10^-1000+ zoom)
         â€¢ 3D raymarched distance-field fractals (Mandelbulb, Mandelbox, etc.)
         â€¢ 50+ coloring algorithms with customizable palettes
         â€¢ 1000+ preset locations including famous deep zooms
         â€¢ High-resolution export up to 8K
         â€¢ Animation recording and playback
         â€¢ URL-based location sharing
         â€¢ Progressive rendering with Web Workers
         
         TECHNICAL CREDITS:
         â€¢ Perturbation Theory: K.I. Martin (SuperFractalThing)
         â€¢ Series Approximation: Claude Heiland-Allen (Kalles Fraktaler)
         â€¢ Distance Estimation: Milnor, "Dynamics in One Complex Variable"
         â€¢ Mandelbulb: Daniel White & Paul Nylander (2009)
         â€¢ Mandelbox: Tom Lowe (2010)
         â€¢ Smooth Iteration: Linas Vepstas (1997)
         â€¢ Triangle Inequality Average: Kerry Mitchell
         â€¢ Orbit Traps: Clifford Pickover
         
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         META TAGS - Essential Document Metadata
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Abyss Explorer - Infinite-depth fractal exploration with Mandelbrot, Julia sets, Mandelbulb, and more. Features perturbation theory for ultra-deep zooms beyond 10^-1000. Free, open-source, runs in your browser.">
    <meta name="keywords" content="fractal, mandelbrot, julia set, mandelbulb, mandelbox, deep zoom, perturbation theory, 3D fractals, raymarching, WebGL, fractal explorer, mathematical art, complex dynamics, iterated function systems">
    <meta name="author" content="Abyss Explorer Contributors">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Theme & App Meta -->
    <meta name="theme-color" content="#0a0a0f" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="color-scheme" content="dark light">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Abyss Explorer">
    <meta name="application-name" content="Abyss Explorer">
    <meta name="msapplication-TileColor" content="#0a0a0f">
    <meta name="msapplication-config" content="assets/browserconfig.xml">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://abyss-explorer.github.io/">
    <meta property="og:title" content="Abyss Explorer - Infinite Fractal Depths">
    <meta property="og:description" content="Explore mathematical infinity with ultra-deep zoom fractals. 2D & 3D rendering, 50+ coloring algorithms, 1000+ preset locations. Free and open-source.">
    <meta property="og:image" content="https://abyss-explorer.github.io/assets/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Abyss Explorer fractal visualization">
    <meta property="og:site_name" content="Abyss Explorer">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://abyss-explorer.github.io/">
    <meta name="twitter:title" content="Abyss Explorer - Infinite Fractal Depths">
    <meta name="twitter:description" content="Explore mathematical infinity with ultra-deep zoom fractals. Free, open-source, runs in your browser.">
    <meta name="twitter:image" content="https://abyss-explorer.github.io/assets/twitter-card.png">
    <meta name="twitter:image:alt" content="Abyss Explorer fractal visualization">
    <meta name="twitter:creator" content="@abyss_explorer">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://abyss-explorer.github.io/">
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         FAVICONS & APP ICONS
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <link rel="icon" type="image/svg+xml" href="assets/icons/logo.svg">
    <link rel="icon" type="image/svg+xml" sizes="32x32" href="assets/icons/logo.svg">
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="assets/icons/logo.svg">
    <link rel="apple-touch-icon" href="assets/icons/logo.svg">
    <link rel="mask-icon" href="assets/icons/logo.svg" color="#6366f1">
    <link rel="manifest" href="manifest.json">
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TITLE
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <title>Abyss Explorer | Infinite Fractal Depths</title>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PRECONNECT & PRELOAD - Performance Optimizations
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- DNS Prefetch for external resources -->
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    
    <!-- Preconnect to CDNs for faster loading -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Preload critical fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" as="style">
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         EXTERNAL STYLESHEETS
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Google Fonts - Inter (UI) & JetBrains Mono (Code/Numbers) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Application Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/controls.css">
    <link rel="stylesheet" href="css/animations.css">
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         CRITICAL INLINE CSS - Prevents Flash of Unstyled Content (FOUC)
         This CSS is inlined to ensure immediate rendering of loading screen
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <style>
        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           CSS Custom Properties (Critical Subset)
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.4);
        }
        
        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f4f4f5;
            --text-primary: #18181b;
            --text-secondary: #71717a;
        }
        
        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Critical Base Styles
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-text-size-adjust: 100%;
        }
        
        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Loading Screen Styles
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #loading-screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--bg-primary);
            z-index: 10000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        #loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        
        /* Fractal-inspired loading spinner */
        .loading-spinner {
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .loading-spinner::before,
        .loading-spinner::after {
            content: '';
            position: absolute;
            border-radius: 50%;
        }
        
        .loading-spinner::before {
            inset: 0;
            border: 3px solid rgba(99, 102, 241, 0.15);
            border-top-color: var(--accent);
            animation: spin 1s linear infinite;
        }
        
        .loading-spinner::after {
            inset: 12px;
            border: 3px solid rgba(99, 102, 241, 0.15);
            border-bottom-color: var(--accent);
            animation: spin 0.8s linear infinite reverse;
        }
        
        .loading-spinner-inner {
            position: absolute;
            inset: 24px;
            border: 3px solid rgba(99, 102, 241, 0.15);
            border-left-color: var(--accent);
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .loading-logo {
            margin-bottom: 2rem;
        }
        
        .loading-logo svg {
            width: 48px;
            height: 48px;
            color: var(--accent);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }
        
        .loading-text {
            margin-top: 2rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }
        
        .loading-subtext {
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
            min-height: 1.5em;
        }
        
        .loading-progress {
            margin-top: 1.5rem;
            width: 200px;
            height: 3px;
            background: rgba(99, 102, 241, 0.15);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .loading-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent), #818cf8);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Hidden utility class
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .hidden { display: none !important; }
        .invisible { visibility: hidden !important; }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LOADING SCREEN
         
         Displayed while the application initializes. Features:
         â€¢ Fractal-inspired nested spinning circles
         â€¢ Progress bar for loading stages
         â€¢ Status text updates
         â€¢ Smooth fade-out transition when ready
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="loading-screen" role="alert" aria-live="polite" aria-busy="true" aria-label="Application loading">
        <!-- Logo -->
        <div class="loading-logo" aria-hidden="true">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="24" cy="24" r="22" stroke="currentColor" stroke-width="2" opacity="0.3"/>
                <circle cx="24" cy="24" r="16" stroke="currentColor" stroke-width="2" opacity="0.5"/>
                <circle cx="24" cy="24" r="10" stroke="currentColor" stroke-width="2" opacity="0.7"/>
                <circle cx="24" cy="24" r="4" fill="currentColor"/>
                <path d="M24 2v6M24 40v6M2 24h6M40 24h6" stroke="currentColor" stroke-width="2" opacity="0.2"/>
                <path d="M7.03 7.03l4.24 4.24M36.73 36.73l4.24 4.24M7.03 40.97l4.24-4.24M36.73 11.27l4.24-4.24" stroke="currentColor" stroke-width="2" opacity="0.15"/>
            </svg>
        </div>
        
        <!-- Spinner -->
        <div class="loading-spinner" aria-hidden="true">
            <div class="loading-spinner-inner"></div>
        </div>
        
        <!-- Text -->
        <div class="loading-text">Abyss Explorer</div>
        <div class="loading-subtext" id="loading-status">Initializing core modules...</div>
        
        <!-- Progress Bar -->
        <div class="loading-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Loading progress">
            <div class="loading-progress-bar" id="loading-progress-bar"></div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SKIP NAVIGATION LINK (Accessibility)
         Allows keyboard users to skip directly to main content
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <a href="#fractal-canvas-2d" class="sr-only" id="skip-nav">Skip to fractal canvas</a>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MAIN APPLICATION CONTAINER
         
         Grid Layout:
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              HEADER                     â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚              â”‚                         â”‚
         â”‚   SIDEBAR    â”‚     CANVAS AREA         â”‚
         â”‚              â”‚                         â”‚
         â”‚              â”‚                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="app" class="app-container" role="application" aria-label="Abyss Explorer Fractal Application">
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             CANVAS LAYER - Primary Rendering Surface
             
             Contains three stacked canvases:
             1. fractal-canvas-2d: 2D fractal rendering (Mandelbrot, Julia, etc.)
             2. fractal-canvas-3d: 3D WebGL rendering (Three.js)
             3. overlay-canvas: UI overlays (crosshairs, selection boxes, etc.)
             
             Plus various HUD elements for coordinates, progress, etc.
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="canvas-container" class="canvas-container" role="img" aria-label="Fractal visualization">
            
            <!-- 2D Fractal Canvas -->
            <canvas 
                id="fractal-canvas-2d" 
                class="fractal-canvas active"
                role="img"
                aria-label="2D Fractal rendering canvas - Use mouse wheel to zoom, click and drag to pan"
                tabindex="0"
                data-testid="canvas-2d"
            ></canvas>
            
            <!-- 3D Fractal Canvas (Three.js WebGL) -->
            <canvas 
                id="fractal-canvas-3d" 
                class="fractal-canvas"
                role="img"
                aria-label="3D Fractal rendering canvas - Use mouse to orbit, scroll to zoom"
                tabindex="0"
                data-testid="canvas-3d"
            ></canvas>
            
            <!-- Overlay Canvas for UI elements -->
            <canvas 
                id="overlay-canvas" 
                class="overlay-canvas"
                aria-hidden="true"
                data-testid="canvas-overlay"
            ></canvas>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 RENDER PROGRESS INDICATOR
                 Shows rendering progress for complex/tiled renders
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div 
                id="render-progress" 
                class="render-progress" 
                role="progressbar" 
                aria-valuemin="0" 
                aria-valuemax="100" 
                aria-valuenow="0" 
                aria-label="Rendering progress"
                hidden
            >
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-info">
                    <span class="progress-text" id="progress-text">Rendering: 0%</span>
                    <span class="progress-tiles" id="progress-tiles">0/0 tiles</span>
                    <button class="progress-cancel" id="progress-cancel" aria-label="Cancel rendering">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 COORDINATES DISPLAY (HUD)
                 Shows current position, zoom level, iteration count
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div 
                id="coords-display" 
                class="coords-display" 
                aria-live="polite" 
                aria-atomic="true"
                role="status"
                aria-label="Current coordinates and parameters"
            >
                <div class="coord-row">
                    <span class="coord-label">Re:</span>
                    <span class="coord-value mono" id="coord-real" title="Real component of center point">-0.5</span>
                    <button class="coord-copy" data-copy="real" aria-label="Copy real coordinate" title="Copy">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2"/>
                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                        </svg>
                    </button>
                </div>
                <div class="coord-row">
                    <span class="coord-label">Im:</span>
                    <span class="coord-value mono" id="coord-imag" title="Imaginary component of center point">0.0</span>
                    <button class="coord-copy" data-copy="imag" aria-label="Copy imaginary coordinate" title="Copy">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2"/>
                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                        </svg>
                    </button>
                </div>
                <div class="coord-row">
                    <span class="coord-label">Zoom:</span>
                    <span class="coord-value mono" id="coord-zoom" title="Current zoom magnification">1.0Ã—</span>
                </div>
                <div class="coord-row">
                    <span class="coord-label">10^</span>
                    <span class="coord-value mono" id="coord-zoom-exp" title="Zoom as power of 10">0</span>
                </div>
                <div class="coord-row">
                    <span class="coord-label">Iter:</span>
                    <span class="coord-value mono" id="coord-iter" title="Maximum iteration count">1000</span>
                </div>
                <div class="coord-row coord-row-mouse" id="coord-mouse-row">
                    <span class="coord-label">Mouse:</span>
                    <span class="coord-value mono" id="coord-mouse" title="Coordinates under cursor">-</span>
                </div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 MINIMAP
                 Shows zoom context - current view position within the full set
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div 
                id="minimap-container" 
                class="minimap-container" 
                role="img" 
                aria-label="Zoom context minimap showing current view position within the fractal"
                title="Minimap - Click to navigate"
            >
                <canvas 
                    id="minimap-canvas" 
                    class="minimap-canvas" 
                    width="160" 
                    height="160"
                    aria-hidden="true"
                ></canvas>
                <div 
                    class="minimap-viewport" 
                    id="minimap-viewport"
                    role="slider"
                    aria-label="Current viewport position"
                    aria-valuetext="Drag to navigate"
                ></div>
                <div class="minimap-controls">
                    <button 
                        class="minimap-btn" 
                        id="minimap-zoom-out" 
                        aria-label="Zoom out minimap"
                        title="Zoom out minimap"
                    >âˆ’</button>
                    <button 
                        class="minimap-btn" 
                        id="minimap-zoom-in" 
                        aria-label="Zoom in minimap"
                        title="Zoom in minimap"
                    >+</button>
                </div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 PERFORMANCE STATS (HUD)
                 Shows FPS, render time, precision mode, memory usage
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div 
                id="perf-stats" 
                class="perf-stats" 
                aria-label="Performance statistics"
                role="status"
                hidden
            >
                <div class="perf-row">
                    <span class="perf-label">FPS:</span>
                    <span class="perf-value" id="fps-counter">60</span>
                </div>
                <div class="perf-row">
                    <span class="perf-label">Render:</span>
                    <span class="perf-value" id="render-time">0ms</span>
                </div>
                <div class="perf-row">
                    <span class="perf-label">Precision:</span>
                    <span class="perf-value" id="precision-mode">Float64</span>
                </div>
                <div class="perf-row">
                    <span class="perf-label">Ref Iter:</span>
                    <span class="perf-value" id="ref-iterations">0</span>
                </div>
                <div class="perf-row">
                    <span class="perf-label">SA Skip:</span>
                    <span class="perf-value" id="sa-skip">0</span>
                </div>
                <div class="perf-row">
                    <span class="perf-label">Workers:</span>
                    <span class="perf-value" id="worker-count">0</span>
                </div>
                <div class="perf-row">
                    <span class="perf-label">Tiles:</span>
                    <span class="perf-value" id="tile-count">0</span>
                </div>
                <div class="perf-row">
                    <span class="perf-label">Glitches:</span>
                    <span class="perf-value" id="glitch-count">0</span>
                </div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 ITERATION HISTOGRAM (HUD)
                 Visual representation of iteration distribution
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div 
                id="iteration-histogram" 
                class="iteration-histogram"
                aria-label="Iteration count distribution histogram"
                role="img"
                hidden
            >
                <canvas 
                    id="histogram-canvas" 
                    class="histogram-canvas" 
                    width="200" 
                    height="60"
                ></canvas>
                <div class="histogram-labels">
                    <span>0</span>
                    <span id="histogram-max">1000</span>
                </div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 CENTER CROSSHAIR
                 Optional crosshair showing exact center of view
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div id="center-crosshair" class="center-crosshair" hidden aria-hidden="true">
                <div class="crosshair-h"></div>
                <div class="crosshair-v"></div>
                <div class="crosshair-center"></div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 ZOOM INDICATOR
                 Visual feedback during zoom operations
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div id="zoom-indicator" class="zoom-indicator" hidden aria-hidden="true">
                <div class="zoom-indicator-ring"></div>
                <div class="zoom-indicator-text">2Ã—</div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 SELECTION BOX
                 Box drawn when selecting zoom area
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div id="selection-box" class="selection-box" hidden aria-hidden="true"></div>
            
        </div><!-- /canvas-container -->

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HEADER BAR
             
             Contains:
             â€¢ Logo and sidebar toggle
             â€¢ Mode switcher (2D/3D)
             â€¢ Current fractal indicator
             â€¢ Quick action buttons
             â€¢ Settings and help
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <header id="header" class="header" role="banner">
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 HEADER LEFT - Sidebar Toggle & Logo
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div class="header-left">
                <!-- Sidebar Toggle Button -->
                <button 
                    id="sidebar-toggle" 
                    class="icon-btn sidebar-toggle"
                    aria-label="Toggle sidebar"
                    aria-expanded="true"
                    aria-controls="sidebar"
                    title="Toggle Sidebar (Tab)"
                >
                    <svg class="icon icon-menu" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12h18M3 6h18M3 18h18"/>
                    </svg>
                    <svg class="icon icon-close hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
                
                <!-- Logo -->
                <a href="/" class="logo" aria-label="Abyss Explorer - Home">
                    <svg class="logo-icon" viewBox="0 0 32 32" fill="none" aria-hidden="true">
                        <!-- Outer ring -->
                        <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="1.5"/>
                        <!-- Middle ring -->
                        <circle cx="16" cy="16" r="9" stroke="currentColor" stroke-width="1.5" opacity="0.6"/>
                        <!-- Inner ring -->
                        <circle cx="16" cy="16" r="5" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
                        <!-- Center dot -->
                        <circle cx="16" cy="16" r="2" fill="currentColor"/>
                        <!-- Cross lines -->
                        <path d="M16 2v4M16 26v4M2 16h4M26 16h4" stroke="currentColor" stroke-width="1.5" opacity="0.3"/>
                        <!-- Diagonal lines -->
                        <path d="M5.37 5.37l2.83 2.83M23.8 23.8l2.83 2.83M5.37 26.63l2.83-2.83M23.8 8.2l2.83-2.83" stroke="currentColor" stroke-width="1" opacity="0.2"/>
                    </svg>
                    <span class="logo-text">Abyss Explorer</span>
                    <span class="logo-version" aria-label="Version 1.0">v1.0</span>
                </a>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 HEADER CENTER - Mode Switcher & Current Fractal
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div class="header-center">
                <!-- Mode Switcher (2D / 3D) -->
                <div class="mode-switcher" role="tablist" aria-label="Rendering mode selection">
                    <button 
                        id="mode-2d" 
                        class="mode-btn active" 
                        role="tab" 
                        aria-selected="true"
                        aria-controls="panel-2d"
                        title="Switch to 2D mode (2)"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="12" cy="12" r="4" opacity="0.5"/>
                        </svg>
                        <span>2D</span>
                    </button>
                    <button 
                        id="mode-3d" 
                        class="mode-btn" 
                        role="tab" 
                        aria-selected="false"
                        aria-controls="panel-3d"
                        title="Switch to 3D mode (3)"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5" opacity="0.7"/>
                            <path d="M2 12l10 5 10-5" opacity="0.5"/>
                        </svg>
                        <span>3D</span>
                    </button>
                </div>
                
                <!-- Current Fractal Dropdown -->
                <div class="current-fractal-wrapper">
                    <button 
                        class="current-fractal" 
                        id="current-fractal"
                        aria-haspopup="listbox"
                        aria-expanded="false"
                        aria-label="Current fractal type - click to change"
                        title="Click to change fractal type"
                    >
                        <span class="fractal-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <circle cx="12" cy="12" r="4"/>
                            </svg>
                        </span>
                        <span class="fractal-name" id="current-fractal-name">Mandelbrot Set</span>
                        <svg class="icon dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </button>
                    
                    <!-- Fractal Type Dropdown Menu -->
                    <div class="fractal-dropdown" id="fractal-dropdown" role="listbox" hidden>
                        <div class="dropdown-section">
                            <div class="dropdown-header">Classic 2D</div>
                            <button class="dropdown-item active" role="option" aria-selected="true" data-fractal="mandelbrot">
                                <span class="item-icon">M</span>
                                <span class="item-text">Mandelbrot Set</span>
                                <span class="item-formula">zÂ² + c</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="julia">
                                <span class="item-icon">J</span>
                                <span class="item-text">Julia Set</span>
                                <span class="item-formula">zÂ² + câ‚€</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="multibrot">
                                <span class="item-icon">Mâ¿</span>
                                <span class="item-text">Multibrot</span>
                                <span class="item-formula">zâ¿ + c</span>
                            </button>
                        </div>
                        <div class="dropdown-section">
                            <div class="dropdown-header">Variants</div>
                            <button class="dropdown-item" role="option" data-fractal="burning-ship">
                                <span class="item-icon">ğŸš¢</span>
                                <span class="item-text">Burning Ship</span>
                                <span class="item-formula">|z|Â² + c</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="tricorn">
                                <span class="item-icon">T</span>
                                <span class="item-text">Tricorn</span>
                                <span class="item-formula">zÌ„Â² + c</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="celtic">
                                <span class="item-icon">C</span>
                                <span class="item-text">Celtic</span>
                                <span class="item-formula">|Re(zÂ²)| + c</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="buffalo">
                                <span class="item-icon">B</span>
                                <span class="item-text">Buffalo</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="phoenix">
                                <span class="item-icon">P</span>
                                <span class="item-text">Phoenix</span>
                                <span class="item-formula">zÂ² + c + pzâ‚‹â‚</span>
                            </button>
                        </div>
                        <div class="dropdown-section">
                            <div class="dropdown-header">Newton Fractals</div>
                            <button class="dropdown-item" role="option" data-fractal="newton-z3">
                                <span class="item-icon">NÂ³</span>
                                <span class="item-text">Newton zÂ³ - 1</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="newton-z4">
                                <span class="item-icon">Nâ´</span>
                                <span class="item-text">Newton zâ´ - 1</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="newton-sin">
                                <span class="item-icon">NË¢</span>
                                <span class="item-text">Newton sin(z)</span>
                            </button>
                        </div>
                        <div class="dropdown-section">
                            <div class="dropdown-header">Other</div>
                            <button class="dropdown-item" role="option" data-fractal="magnet1">
                                <span class="item-icon">âŠ•</span>
                                <span class="item-text">Magnet Type 1</span>
                            </button>
                            <button class="dropdown-item" role="option" data-fractal="magnet2">
                                <span class="item-icon">âŠ—</span>
                                <span class="item-text">Magnet Type 2</span>
                            </button>
                        </div>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item dropdown-item-special" role="option" data-fractal="custom">
                            <span class="item-icon">Æ’</span>
                            <span class="item-text">Custom Formula...</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 HEADER RIGHT - Action Buttons
                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <div class="header-right">
                <!-- Navigation Actions -->
                <div class="header-group" role="group" aria-label="Navigation">
                    <button 
                        id="btn-home" 
                        class="icon-btn" 
                        aria-label="Reset to home view" 
                        title="Home View (H)"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                            <polyline points="9 22 9 12 15 12 15 22"/>
                        </svg>
                    </button>
                    
                    <button 
                        id="btn-back" 
                        class="icon-btn" 
                        aria-label="Go back to previous view" 
                        title="Back (Backspace)"
                        disabled
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    
                    <button 
                        id="btn-forward" 
                        class="icon-btn" 
                        aria-label="Go forward" 
                        title="Forward"
                        disabled
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
                
                <div class="header-divider" aria-hidden="true"></div>
                
                <!-- History Actions -->
                <div class="header-group" role="group" aria-label="History">
                    <button 
                        id="btn-undo" 
                        class="icon-btn" 
                        aria-label="Undo last action" 
                        title="Undo (Ctrl+Z)"
                        disabled
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 7v6h6"/>
                            <path d="M3 13c0-4.97 4.03-9 9-9a9 9 0 019 9 9 9 0 01-9 9c-2.25 0-4.31-.83-5.89-2.2"/>
                        </svg>
                        <span class="btn-badge" id="undo-count" hidden>0</span>
                    </button>
                    
                    <button 
                        id="btn-redo" 
                        class="icon-btn" 
                        aria-label="Redo last undone action" 
                        title="Redo (Ctrl+Y)"
                        disabled
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 7v6h-6"/>
                            <path d="M21 13c0-4.97-4.03-9-9-9a9 9 0 00-9 9 9 9 0 009 9c2.25 0 4.31-.83 5.89-2.2"/>
                        </svg>
                        <span class="btn-badge" id="redo-count" hidden>0</span>
                    </button>
                </div>
                
                <div class="header-divider" aria-hidden="true"></div>
                
                <!-- Sharing & Export -->
                <div class="header-group" role="group" aria-label="Share and Export">
                    <button 
                        id="btn-share" 
                        class="icon-btn" 
                        aria-label="Share current location" 
                        title="Share Location (S)"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="18" cy="5" r="3"/>
                            <circle cx="6" cy="12" r="3"/>
                            <circle cx="18" cy="19" r="3"/>
                            <path d="M8.59 13.51l6.83 3.98M15.41 6.51l-6.82 3.98"/>
                        </svg>
                    </button>
                    
                    <button 
                        id="btn-export" 
                        class="icon-btn" 
                        aria-label="Export high-resolution image" 
                        title="Export Image (E)"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                    </button>
                    
                    <button 
                        id="btn-screenshot" 
                        class="icon-btn" 
                        aria-label="Quick screenshot" 
                        title="Screenshot (P)"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
                            <circle cx="12" cy="13" r="4"/>
                        </svg>
                    </button>
                </div>
                
                <div class="header-divider" aria-hidden="true"></div>
                
                <!-- View Controls -->
                <div class="header-group" role="group" aria-label="View">
                    <button 
                        id="btn-bookmark" 
                        class="icon-btn" 
                        aria-label="Bookmark current location" 
                        title="Bookmark (B)"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                        </svg>
                    </button>
                    
                    <button 
                        id="btn-fullscreen" 
                        class="icon-btn" 
                        aria-label="Toggle fullscreen" 
                        title="Fullscreen (F)"
                    >
                        <svg class="icon icon-expand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M8 3H5a2 2 0 00-2 2v3M21 8V5a2 2 0 00-2-2h-3M3 16v3a2 2 0 002 2h3M16 21h3a2 2 0 002-2v-3"/>
                        </svg>
                        <svg class="icon icon-compress hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 14h6v6M20 10h-6V4M14 10l7-7M3 21l7-7"/>
                        </svg>
                    </button>
                </div>
                
                <div class="header-divider" aria-hidden="true"></div>
                
                <!-- Settings & Help -->
                <div class="header-group" role="group" aria-label="Settings">
                    <button 
                        id="btn-settings" 
                        class="icon-btn" 
                        aria-label="Open settings" 
                        title="Settings"
                        aria-haspopup="dialog"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                        </svg>
                    </button>
                    
                    <button 
                        id="btn-help" 
                        class="icon-btn" 
                        aria-label="Help and keyboard shortcuts" 
                        title="Help (?)"
                        aria-haspopup="dialog"
                    >
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SIDEBAR - Main Control Panel
             
             Contains all fractal parameters and settings organized into
             collapsible sections. Fully keyboard accessible.
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <aside 
            id="sidebar" 
            class="sidebar" 
            role="complementary" 
            aria-label="Fractal controls and settings"
        >
            <div class="sidebar-content" id="sidebar-content">
                
                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Fractal Type Selector
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-fractal-title">
                    <h2 id="section-fractal-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <circle cx="12" cy="12" r="10"/>
                            <circle cx="12" cy="12" r="4"/>
                            <circle cx="12" cy="12" r="1"/>
                        </svg>
                        <span>Fractal Type</span>
                        <button 
                            class="collapse-btn" 
                            aria-expanded="true" 
                            aria-controls="fractal-content"
                            aria-label="Toggle Fractal Type section"
                        >
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="fractal-content" class="section-content">
                        
                        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                             2D Fractal Controls
                             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <div id="panel-2d" class="fractal-panel active" role="tabpanel" aria-labelledby="mode-2d">
                            
                            <!-- Fractal Type Selector -->
                            <div class="control-group">
                                <label for="fractal-select-2d" class="control-label">
                                    <span>Fractal</span>
                                    <button 
                                        class="info-btn" 
                                        aria-label="Information about fractal types"
                                        data-tooltip="Choose from classic fractals like Mandelbrot and Julia sets, or explore variants like Burning Ship and Celtic."
                                    >
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M12 16v-4M12 8h.01"/>
                                        </svg>
                                    </button>
                                </label>
                                <select id="fractal-select-2d" class="control-select" aria-describedby="fractal-desc">
                                    <optgroup label="Classic">
                                        <option value="mandelbrot" selected>Mandelbrot Set</option>
                                        <option value="julia">Julia Set</option>
                                        <option value="multibrot">Multibrot (zâ¿ + c)</option>
                                    </optgroup>
                                    <optgroup label="Mandelbrot Variants">
                                        <option value="burning-ship">Burning Ship</option>
                                        <option value="tricorn">Tricorn (Mandelbar)</option>
                                        <option value="celtic">Celtic Mandelbrot</option>
                                        <option value="celtic-mandelbar">Celtic Mandelbar</option>
                                        <option value="buffalo">Buffalo</option>
                                        <option value="perpendicular-mandelbrot">Perpendicular Mandelbrot</option>
                                        <option value="perpendicular-burning-ship">Perpendicular Burning Ship</option>
                                        <option value="perpendicular-celtic">Perpendicular Celtic</option>
                                        <option value="perpendicular-buffalo">Perpendicular Buffalo</option>
                                    </optgroup>
                                    <optgroup label="Higher Power">
                                        <option value="burning-ship-3">Burning Ship (Power 3)</option>
                                        <option value="burning-ship-4">Burning Ship (Power 4)</option>
                                        <option value="tricorn-3">Tricorn (Power 3)</option>
                                        <option value="tricorn-4">Tricorn (Power 4)</option>
                                    </optgroup>
                                    <optgroup label="Phoenix Family">
                                        <option value="phoenix">Phoenix</option>
                                        <option value="phoenix-mandelbrot">Phoenix Mandelbrot</option>
                                    </optgroup>
                                    <optgroup label="Newton Fractals">
                                        <option value="newton-z3">Newton zÂ³ - 1</option>
                                        <option value="newton-z4">Newton zâ´ - 1</option>
                                        <option value="newton-z5">Newton zâµ - 1</option>
                                        <option value="newton-z6">Newton zâ¶ - 1</option>
                                        <option value="newton-sin">Newton sin(z)</option>
                                        <option value="newton-cos">Newton cos(z)</option>
                                        <option value="newton-exp">Newton exp(z) - 1</option>
                                    </optgroup>
                                    <optgroup label="Magnet Fractals">
                                        <option value="magnet1">Magnet Type 1</option>
                                        <option value="magnet2">Magnet Type 2</option>
                                        <option value="magnet1-julia">Magnet 1 Julia</option>
                                        <option value="magnet2-julia">Magnet 2 Julia</option>
                                    </optgroup>
                                    <optgroup label="Other">
                                        <option value="lambda">Lambda Fractal</option>
                                        <option value="spider">Spider</option>
                                        <option value="siegel-disk">Siegel Disk</option>
                                        <option value="custom">Custom Formula...</option>
                                    </optgroup>
                                </select>
                                <p id="fractal-desc" class="control-description hidden"></p>
                            </div>
                            
                            <!-- Julia Seed Controls (shown when Julia selected) -->
                            <div id="julia-controls" class="control-group subsection hidden">
                                <label class="control-label">
                                    <span>Julia Seed (c)</span>
                                    <button 
                                        class="info-btn"
                                        aria-label="Information about Julia seed"
                                        data-tooltip="The constant c that defines this Julia set. Different values create dramatically different patterns."
                                    >
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M12 16v-4M12 8h.01"/>
                                        </svg>
                                    </button>
                                </label>
                                <div class="dual-input">
                                    <div class="input-with-label">
                                        <label for="julia-real">Re</label>
                                        <input 
                                            type="number" 
                                            id="julia-real" 
                                            class="control-input mono" 
                                            value="-0.7" 
                                            step="0.001"
                                            aria-label="Real component of Julia seed"
                                        >
                                    </div>
                                    <div class="input-with-label">
                                        <label for="julia-imag">Im</label>
                                        <input 
                                            type="number" 
                                            id="julia-imag" 
                                            class="control-input mono" 
                                            value="0.27015" 
                                            step="0.001"
                                            aria-label="Imaginary component of Julia seed"
                                        >
                                    </div>
                                </div>
                                <div class="btn-row">
                                    <button id="btn-pick-julia" class="btn btn-secondary btn-sm" title="Click on Mandelbrot to select Julia seed">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <circle cx="12" cy="12" r="1"/>
                                            <path d="M12 2v4M12 18v4M2 12h4M18 12h4"/>
                                        </svg>
                                        <span>Pick from Mandelbrot</span>
                                    </button>
                                    <button id="btn-julia-presets" class="btn btn-sm" title="Browse Julia presets">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="3" width="7" height="7"/>
                                            <rect x="14" y="3" width="7" height="7"/>
                                            <rect x="3" y="14" width="7" height="7"/>
                                            <rect x="14" y="14" width="7" height="7"/>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Julia Preview -->
                                <div class="julia-preview" id="julia-preview">
                                    <canvas id="julia-preview-canvas" width="140" height="100"></canvas>
                                    <div class="julia-preview-label">Preview</div>
                                </div>
                            </div>
                            
                            <!-- Multibrot Power Controls -->
                            <div id="multibrot-controls" class="control-group subsection hidden">
                                <label for="multibrot-power" class="control-label">
                                    <span>Power (n)</span>
                                    <span class="label-value" id="multibrot-power-display">2</span>
                                </label>
                                <div class="range-with-value">
                                    <input 
                                        type="range" 
                                        id="multibrot-power" 
                                        class="control-range" 
                                        min="2" 
                                        max="12" 
                                        value="2" 
                                        step="0.1"
                                        aria-label="Multibrot power exponent"
                                        aria-valuemin="2"
                                        aria-valuemax="12"
                                        aria-valuenow="2"
                                    >
                                </div>
                                <div class="power-presets">
                                    <button class="preset-btn active" data-power="2">2</button>
                                    <button class="preset-btn" data-power="3">3</button>
                                    <button class="preset-btn" data-power="4">4</button>
                                    <button class="preset-btn" data-power="5">5</button>
                                    <button class="preset-btn" data-power="6">6</button>
                                    <button class="preset-btn" data-power="8">8</button>
                                </div>
                            </div>
                            
                            <!-- Phoenix Parameters -->
                            <div id="phoenix-controls" class="control-group subsection hidden">
                                <label for="phoenix-p" class="control-label">
                                    <span>Phoenix Parameter (p)</span>
                                </label>
                                <div class="dual-input">
                                    <div class="input-with-label">
                                        <label for="phoenix-p-real">Re</label>
                                        <input type="number" id="phoenix-p-real" class="control-input mono" value="0.5667" step="0.01">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="phoenix-p-imag">Im</label>
                                        <input type="number" id="phoenix-p-imag" class="control-input mono" value="0" step="0.01">
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        
                        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                             3D Fractal Controls
                             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <div id="panel-3d" class="fractal-panel" role="tabpanel" aria-labelledby="mode-3d" hidden>
                            
                            <!-- 3D Fractal Type Selector -->
                            <div class="control-group">
                                <label for="fractal-select-3d" class="control-label">
                                    <span>3D Fractal</span>
                                </label>
                                <select id="fractal-select-3d" class="control-select">
                                    <optgroup label="Mandelbulb Family">
                                        <option value="mandelbulb" selected>Mandelbulb</option>
                                        <option value="mandelbulb-julia">Mandelbulb Julia</option>
                                        <option value="mandelbulb-sin">Mandelbulb Sine</option>
                                        <option value="mandelbulb-cos">Mandelbulb Cosine</option>
                                    </optgroup>
                                    <optgroup label="Mandelbox Family">
                                        <option value="mandelbox">Mandelbox</option>
                                        <option value="mandelbox-julia">Mandelbox Julia</option>
                                        <option value="amazingbox">Amazing Surface Box</option>
                                        <option value="amazingbox-mod1">Amazing Box Mod 1</option>
                                    </optgroup>
                                    <optgroup label="IFS Fractals">
                                        <option value="menger">Menger Sponge</option>
                                        <option value="menger-smooth">Smooth Menger</option>
                                        <option value="sierpinski">Sierpinski Tetrahedron</option>
                                        <option value="sierpinski-octahedron">Sierpinski Octahedron</option>
                                        <option value="kaleidoscopic">Kaleidoscopic IFS</option>
                                        <option value="koch-snowflake-3d">Koch Snowflake 3D</option>
                                    </optgroup>
                                    <optgroup label="Quaternion">
                                        <option value="quat-julia">Quaternion Julia</option>
                                        <option value="quat-mandelbrot">Quaternion Mandelbrot</option>
                                        <option value="bicomplex">Bicomplex Mandelbrot</option>
                                    </optgroup>
                                    <optgroup label="Kleinian & Apollonian">
                                        <option value="apollonian">Apollonian Gasket</option>
                                        <option value="kleinian">Kleinian Group</option>
                                        <option value="kleinian-limited">Limited Kleinian</option>
                                    </optgroup>
                                    <optgroup label="Hybrid & Experimental">
                                        <option value="bristorbrot">Bristorbrot</option>
                                        <option value="cubic-mandelbrot">Cubic Mandelbrot</option>
                                        <option value="hybrid-custom">Custom Hybrid...</option>
                                    </optgroup>
                                </select>
                            </div>
                            
                            <!-- Mandelbulb Power Control -->
                            <div id="bulb-power-control" class="control-group">
                                <label for="bulb-power" class="control-label">
                                    <span>Power</span>
                                    <span class="label-value" id="bulb-power-display">8</span>
                                </label>
                                <div class="range-with-value">
                                    <input 
                                        type="range" 
                                        id="bulb-power" 
                                        class="control-range" 
                                        min="2" 
                                        max="20" 
                                        value="8" 
                                        step="0.5"
                                        aria-label="Mandelbulb power"
                                    >
                                </div>
                                <div class="power-presets">
                                    <button class="preset-btn" data-power="2">2</button>
                                    <button class="preset-btn" data-power="3">3</button>
                                    <button class="preset-btn" data-power="4">4</button>
                                    <button class="preset-btn" data-power="6">6</button>
                                    <button class="preset-btn active" data-power="8">8</button>
                                    <button class="preset-btn" data-power="12">12</button>
                                    <button class="preset-btn" data-power="16">16</button>
                                </div>
                            </div>
                            
                            <!-- Mandelbox Scale Control -->
                            <div id="box-scale-control" class="control-group hidden">
                                <label for="box-scale" class="control-label">
                                    <span>Scale</span>
                                    <span class="label-value" id="box-scale-display">2.0</span>
                                </label>
                                <div class="range-with-value">
                                    <input 
                                        type="range" 
                                        id="box-scale" 
                                        class="control-range" 
                                        min="-3" 
                                        max="3" 
                                        value="2" 
                                        step="0.01"
                                    >
                                </div>
                                <div class="mandelbox-params">
                                    <div class="input-with-label">
                                        <label for="box-fold">Fold</label>
                                        <input type="number" id="box-fold" class="control-input narrow" value="1" step="0.1">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="box-minr">Min RÂ²</label>
                                        <input type="number" id="box-minr" class="control-input narrow" value="0.25" step="0.05">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="box-fixr">Fix RÂ²</label>
                                        <input type="number" id="box-fixr" class="control-input narrow" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quaternion Julia Seed (for 3D Julia) -->
                            <div id="quat-julia-controls" class="control-group hidden">
                                <label class="control-label">Quaternion Seed</label>
                                <div class="quat-inputs">
                                    <div class="input-with-label">
                                        <label>w</label>
                                        <input type="number" id="quat-w" class="control-input narrow mono" value="-0.2" step="0.01">
                                    </div>
                                    <div class="input-with-label">
                                        <label>x</label>
                                        <input type="number" id="quat-x" class="control-input narrow mono" value="0.8" step="0.01">
                                    </div>
                                    <div class="input-with-label">
                                        <label>y</label>
                                        <input type="number" id="quat-y" class="control-input narrow mono" value="0" step="0.01">
                                    </div>
                                    <div class="input-with-label">
                                        <label>z</label>
                                        <input type="number" id="quat-z" class="control-input narrow mono" value="0" step="0.01">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Kaleidoscopic IFS Parameters -->
                            <div id="kaleidoscopic-controls" class="control-group hidden">
                                <label class="control-label">IFS Parameters</label>
                                <div class="input-with-label">
                                    <label for="kif-fold-count">Fold Count</label>
                                    <input type="number" id="kif-fold-count" class="control-input narrow" value="6" min="3" max="12">
                                </div>
                                <div class="input-with-label">
                                    <label for="kif-scale">Scale</label>
                                    <input type="number" id="kif-scale" class="control-input narrow" value="2" step="0.1">
                                </div>
                                <div class="input-with-label">
                                    <label for="kif-offset">Offset</label>
                                    <input type="number" id="kif-offset" class="control-input narrow" value="1" step="0.1">
                                </div>
                            </div>
                            
                        </div>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Iterations & Precision
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-iteration-title">
                    <h2 id="section-iteration-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                        </svg>
                        <span>Iterations & Precision</span>
                        <button class="collapse-btn" aria-expanded="true" aria-controls="iteration-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="iteration-content" class="section-content">
                        
                        <!-- Maximum Iterations -->
                        <div class="control-group">
                            <label for="max-iterations" class="control-label">
                                <span>Max Iterations</span>
                                <span class="label-value" id="max-iter-display">1,000</span>
                                <button 
                                    class="info-btn"
                                    data-tooltip="Higher values reveal finer detail in the fractal boundary, but increase render time. Auto mode adjusts based on zoom depth."
                                >
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <div class="range-input-combo">
                                <input 
                                    type="range" 
                                    id="max-iterations" 
                                    class="control-range" 
                                    min="50" 
                                    max="100000" 
                                    value="1000" 
                                    step="50"
                                    aria-label="Maximum iterations"
                                >
                                <input 
                                    type="number" 
                                    id="max-iterations-value" 
                                    class="control-input narrow mono" 
                                    value="1000" 
                                    min="50" 
                                    max="10000000"
                                    aria-label="Maximum iterations value"
                                >
                            </div>
                            <div class="iteration-presets">
                                <button class="preset-btn" data-iter="100">100</button>
                                <button class="preset-btn" data-iter="500">500</button>
                                <button class="preset-btn active" data-iter="1000">1K</button>
                                <button class="preset-btn" data-iter="5000">5K</button>
                                <button class="preset-btn" data-iter="10000">10K</button>
                                <button class="preset-btn" data-iter="50000">50K</button>
                                <button class="preset-btn" data-iter="100000">100K</button>
                            </div>
                            <label class="checkbox-label">
                                <input type="checkbox" id="auto-iterations" checked>
                                <span class="checkbox-custom"></span>
                                <span>Auto-adjust with zoom</span>
                                <span class="checkbox-hint">(Recommended)</span>
                            </label>
                        </div>
                        
                        <!-- Bailout Radius -->
                        <div class="control-group">
                            <label for="bailout" class="control-label">
                                <span>Bailout Radius</span>
                                <span class="label-value" id="bailout-display">256</span>
                                <button 
                                    class="info-btn"
                                    data-tooltip="Points are considered 'escaped' when |z| exceeds this value. Larger values improve color smoothness but may affect performance."
                                >
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <div class="range-with-value">
                                <input 
                                    type="range" 
                                    id="bailout" 
                                    class="control-range" 
                                    min="2" 
                                    max="10000" 
                                    value="256" 
                                    step="1"
                                >
                            </div>
                            <div class="bailout-presets">
                                <button class="preset-btn" data-bailout="2">2</button>
                                <button class="preset-btn" data-bailout="4">4</button>
                                <button class="preset-btn" data-bailout="16">16</button>
                                <button class="preset-btn active" data-bailout="256">256</button>
                                <button class="preset-btn" data-bailout="1000">1K</button>
                                <button class="preset-btn" data-bailout="10000">10K</button>
                            </div>
                        </div>
                        
                        <!-- Precision Mode -->
                        <div class="control-group">
                            <label class="control-label">
                                <span>Precision Mode</span>
                                <button 
                                    class="info-btn"
                                    data-tooltip="Auto: Automatically switch to perturbation theory when needed. Float64: Standard double precision (~15 digits). Perturbation: Deep zoom using reference orbit. Arbitrary: Unlimited precision for extreme depths."
                                >
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="precision" value="auto" checked>
                                    <span class="radio-custom"></span>
                                    <span class="radio-text">
                                        <span class="radio-title">Auto</span>
                                        <span class="radio-desc">Recommended</span>
                                    </span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="precision" value="float64">
                                    <span class="radio-custom"></span>
                                    <span class="radio-text">
                                        <span class="radio-title">Float64</span>
                                        <span class="radio-desc">~10â»Â¹âµ precision</span>
                                    </span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="precision" value="perturbation">
                                    <span class="radio-custom"></span>
                                    <span class="radio-text">
                                        <span class="radio-title">Perturbation</span>
                                        <span class="radio-desc">Deep zoom</span>
                                    </span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="precision" value="arbitrary">
                                    <span class="radio-custom"></span>
                                    <span class="radio-text">
                                        <span class="radio-title">Arbitrary</span>
                                        <span class="radio-desc">Unlimited depth</span>
                                    </span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Deep Zoom Settings (Advanced) -->
                        <div id="deep-zoom-settings" class="control-group subsection">
                            <label class="control-label subsection-title">
                                <span>Deep Zoom Settings</span>
                                <button class="toggle-advanced" aria-expanded="false">
                                    <span>Show</span>
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M6 9l6 6 6-6"/>
                                    </svg>
                                </button>
                            </label>
                            <div class="advanced-content">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="series-approx" checked>
                                    <span class="checkbox-custom"></span>
                                    <span>Series Approximation (SA)</span>
                                    <button class="info-btn" data-tooltip="Skips initial iterations using polynomial approximation. Dramatically speeds up deep zooms.">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                        </svg>
                                    </button>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="glitch-correction" checked>
                                    <span class="checkbox-custom"></span>
                                    <span>Glitch Detection & Correction</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="rebasing" checked>
                                    <span class="checkbox-custom"></span>
                                    <span>Reference Rebasing</span>
                                </label>
                                <div class="input-row">
                                    <div class="input-with-label">
                                        <label for="sa-terms">SA Terms</label>
                                        <input type="number" id="sa-terms" class="control-input narrow" value="16" min="4" max="128" step="4">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="sa-tolerance">SA Tolerance</label>
                                        <input type="number" id="sa-tolerance" class="control-input narrow" value="1e-6" step="1e-7">
                                    </div>
                                </div>
                                <div class="input-row">
                                    <div class="input-with-label">
                                        <label for="glitch-tolerance">Glitch Tol.</label>
                                        <input type="number" id="glitch-tolerance" class="control-input narrow" value="1e-3" step="1e-4">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="ref-iterations">Ref. Iter</label>
                                        <input type="number" id="ref-iterations-input" class="control-input narrow" value="0" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Coloring
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-coloring-title">
                    <h2 id="section-coloring-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 2a10 10 0 0110 10H12V2z"/>
                        </svg>
                        <span>Coloring</span>
                        <button class="collapse-btn" aria-expanded="true" aria-controls="coloring-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="coloring-content" class="section-content">
                        
                        <!-- Coloring Algorithm -->
                        <div class="control-group">
                            <label for="color-algorithm" class="control-label">
                                <span>Algorithm</span>
                                <button class="info-btn" data-tooltip="Different algorithms produce dramatically different visual effects. Experiment to find your favorite!">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <select id="color-algorithm" class="control-select">
                                <optgroup label="Escape Time">
                                    <option value="smooth" selected>Smooth Iteration (Normalized)</option>
                                    <option value="linear">Linear Iteration Count</option>
                                    <option value="logarithmic">Logarithmic</option>
                                    <option value="sqrt">Square Root</option>
                                    <option value="exponential">Exponential</option>
                                    <option value="continuous-potential">Continuous Potential</option>
                                </optgroup>
                                <optgroup label="Orbit Traps">
                                    <option value="orbit-trap-point">Point Trap</option>
                                    <option value="orbit-trap-origin">Origin Trap</option>
                                    <option value="orbit-trap-cross">Cross Trap</option>
                                    <option value="orbit-trap-circle">Circle Trap</option>
                                    <option value="orbit-trap-line-real">Line Trap (Real Axis)</option>
                                    <option value="orbit-trap-line-imag">Line Trap (Imag Axis)</option>
                                    <option value="orbit-trap-square">Square Trap</option>
                                    <option value="orbit-trap-rectangle">Rectangle Trap</option>
                                    <option value="orbit-trap-stalks">Pickover Stalks</option>
                                    <option value="orbit-trap-ring">Ring Trap</option>
                                    <option value="orbit-trap-gaussian">Gaussian Integer Trap</option>
                                    <option value="orbit-trap-grid">Grid Trap</option>
                                </optgroup>
                                <optgroup label="Orbit Analysis">
                                    <option value="triangle-inequality">Triangle Inequality Average</option>
                                    <option value="stripe-average">Stripe Average</option>
                                    <option value="curvature">Curvature Estimation</option>
                                    <option value="angle">Angle/Argument</option>
                                    <option value="average-distance">Average Distance</option>
                                    <option value="min-distance">Minimum Distance</option>
                                    <option value="max-distance">Maximum Distance</option>
                                </optgroup>
                                <optgroup label="Distance Estimation">
                                    <option value="distance-exterior">Distance (Exterior)</option>
                                    <option value="distance-interior">Distance (Interior)</option>
                                    <option value="distance-both">Distance (Both)</option>
                                    <option value="distance-log">Log Distance</option>
                                </optgroup>
                                <optgroup label="Binary Decomposition">
                                    <option value="binary-real">Binary (Real Part)</option>
                                    <option value="binary-imag">Binary (Imaginary Part)</option>
                                    <option value="binary-arg">Binary (Argument)</option>
                                    <option value="binary-mag">Binary (Magnitude)</option>
                                    <option value="decomp-quadrant">Quadrant Decomposition</option>
                                    <option value="decomp-alternating">Alternating Binary</option>
                                </optgroup>
                                <optgroup label="Statistical">
                                    <option value="histogram">Histogram Equalization</option>
                                    <option value="rank-order">Rank Order</option>
                                    <option value="log-density">Log Density</option>
                                </optgroup>
                                <optgroup label="Lighting & Shading">
                                    <option value="slope-shading">Slope Shading (2D Normals)</option>
                                    <option value="blinn-phong">Blinn-Phong Lighting</option>
                                    <option value="lambert">Lambert Shading</option>
                                    <option value="normal-map">Normal Map Visualization</option>
                                    <option value="ambient-occlusion">Ambient Occlusion</option>
                                </optgroup>
                                <optgroup label="Advanced">
                                    <option value="field-lines">Field Lines</option>
                                    <option value="atom-domain">Atom Domain (Period Detection)</option>
                                    <option value="lyapunov">Lyapunov Exponent</option>
                                    <option value="bof60">BOF60 (Period Coloring)</option>
                                    <option value="bof61">BOF61 (Closest Approach)</option>
                                    <option value="exterior-angle">Exterior Angle</option>
                                    <option value="dwell-gradient">Dwell Gradient</option>
                                </optgroup>
                                <optgroup label="Hybrid">
                                    <option value="hybrid-smooth-distance">Smooth + Distance</option>
                                    <option value="hybrid-stripe-slope">Stripe + Slope</option>
                                    <option value="custom">Custom (Expression)...</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <!-- Algorithm-specific controls (dynamically shown) -->
                        <div id="algorithm-controls" class="control-group algorithm-controls">
                            
                            <!-- Orbit Trap Settings -->
                            <div id="orbit-trap-settings" class="algo-settings hidden">
                                <label class="control-label">Trap Settings</label>
                                <div class="input-row">
                                    <div class="input-with-label">
                                        <label for="trap-x">Center X</label>
                                        <input type="number" id="trap-x" class="control-input narrow" value="0" step="0.1">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="trap-y">Center Y</label>
                                        <input type="number" id="trap-y" class="control-input narrow" value="0" step="0.1">
                                    </div>
                                </div>
                                <div class="input-with-label">
                                    <label for="trap-size">Size/Radius</label>
                                    <input type="range" id="trap-size" class="control-range" value="0.5" min="0.01" max="5" step="0.01">
                                </div>
                                <div class="input-with-label">
                                    <label for="trap-rotation">Rotation</label>
                                    <input type="range" id="trap-rotation" class="control-range" value="0" min="-180" max="180" step="1">
                                </div>
                            </div>
                            
                            <!-- Triangle Inequality Settings -->
                            <div id="tia-settings" class="algo-settings hidden">
                                <label class="control-label">Triangle Inequality</label>
                                <div class="input-with-label">
                                    <label for="tia-stripe-density">Stripe Density</label>
                                    <input type="range" id="tia-stripe-density" class="control-range" value="1" min="0.1" max="20" step="0.1">
                                </div>
                            </div>
                            
                            <!-- Stripe Average Settings -->
                            <div id="stripe-settings" class="algo-settings hidden">
                                <label class="control-label">Stripe Average</label>
                                <div class="input-with-label">
                                    <label for="stripe-density">Stripe Density</label>
                                    <input type="range" id="stripe-density" class="control-range" value="5" min="1" max="50" step="0.5">
                                </div>
                            </div>
                            
                            <!-- Slope Shading Settings -->
                            <div id="slope-settings" class="algo-settings hidden">
                                <label class="control-label">Light Direction</label>
                                <div class="input-row">
                                    <div class="input-with-label">
                                        <label for="light-azimuth">Azimuth</label>
                                        <input type="range" id="light-azimuth" class="control-range" value="45" min="0" max="360" step="1">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="light-elevation">Elevation</label>
                                        <input type="range" id="light-elevation" class="control-range" value="45" min="0" max="90" step="1">
                                    </div>
                                </div>
                                <div class="input-with-label">
                                    <label for="depth-scale">Depth Scale</label>
                                    <input type="range" id="depth-scale" class="control-range" value="1" min="0.1" max="10" step="0.1">
                                </div>
                                <div class="input-with-label">
                                    <label for="ambient">Ambient</label>
                                    <input type="range" id="ambient" class="control-range" value="0.3" min="0" max="1" step="0.05">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Interior Coloring -->
                        <div class="control-group">
                            <label for="interior-color" class="control-label">
                                <span>Interior Color</span>
                                <button class="info-btn" data-tooltip="How to color points that don't escape (the 'inside' of the set).">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <select id="interior-color" class="control-select">
                                <option value="black" selected>Black</option>
                                <option value="white">White</option>
                                <option value="palette">Use Palette</option>
                                <option value="period">Period Coloring</option>
                                <option value="period-rainbow">Period Rainbow</option>
                                <option value="distance">Distance from Limit</option>
                                <option value="convergence">Convergence Rate</option>
                                <option value="gradient-radial">Radial Gradient</option>
                                <option value="custom-color">Custom Color...</option>
                            </select>
                            <input type="color" id="interior-custom-color" class="control-color hidden" value="#000000">
                        </div>
                        
                        <!-- Color Scale -->
                        <div class="control-group">
                            <label for="color-scale" class="control-label">
                                <span>Color Scale</span>
                                <span class="label-value" id="color-scale-display">1.0</span>
                            </label>
                            <input type="range" id="color-scale" class="control-range" min="0.01" max="20" value="1" step="0.01">
                        </div>
                        
                        <!-- Color Offset -->
                        <div class="control-group">
                            <label for="color-offset" class="control-label">
                                <span>Color Offset</span>
                                <span class="label-value" id="color-offset-display">0.0</span>
                            </label>
                            <input type="range" id="color-offset" class="control-range" min="0" max="1" value="0" step="0.001">
                        </div>
                        
                        <!-- Palette Cycling Animation -->
                        <div class="control-group inline-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="palette-cycling">
                                <span class="checkbox-custom"></span>
                                <span>Cycle Animation</span>
                            </label>
                            <div class="input-with-label compact">
                                <label for="cycle-speed">Speed</label>
                                <input type="number" id="cycle-speed" class="control-input narrow" value="1" min="0.1" max="20" step="0.1">
                            </div>
                        </div>
                        
                        <!-- Color Modifier Options -->
                        <div class="control-group">
                            <label class="control-label subsection-title">
                                <span>Modifiers</span>
                                <button class="toggle-advanced" aria-expanded="false">
                                    <span>Show</span>
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M6 9l6 6 6-6"/>
                                    </svg>
                                </button>
                            </label>
                            <div class="advanced-content hidden">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="color-invert">
                                    <span class="checkbox-custom"></span>
                                    <span>Invert Colors</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="color-grayscale">
                                    <span class="checkbox-custom"></span>
                                    <span>Grayscale</span>
                                </label>
                                <div class="input-with-label">
                                    <label for="color-gamma">Gamma</label>
                                    <input type="range" id="color-gamma" class="control-range" value="1" min="0.2" max="3" step="0.05">
                                </div>
                                <div class="input-with-label">
                                    <label for="color-contrast">Contrast</label>
                                    <input type="range" id="color-contrast" class="control-range" value="1" min="0.5" max="2" step="0.05">
                                </div>
                                <div class="input-with-label">
                                    <label for="color-saturation">Saturation</label>
                                    <input type="range" id="color-saturation" class="control-range" value="1" min="0" max="2" step="0.05">
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Palette
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-palette-title">
                    <h2 id="section-palette-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M12 2.69l5.66 5.66a8 8 0 11-11.31 0z"/>
                        </svg>
                        <span>Palette</span>
                        <button class="collapse-btn" aria-expanded="true" aria-controls="palette-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="palette-content" class="section-content">
                        
                        <!-- Palette Presets -->
                        <div class="control-group">
                            <label for="palette-preset" class="control-label">
                                <span>Preset</span>
                                <span class="label-value" id="palette-name">Ultra Fractal</span>
                            </label>
                            <select id="palette-preset" class="control-select">
                                <optgroup label="Classic Fractal">
                                    <option value="ultra-fractal" selected>Ultra Fractal</option>
                                    <option value="wikipedia">Wikipedia Mandelbrot</option>
                                    <option value="classic-blue">Classic Blue</option>
                                    <option value="black-gold">Black & Gold</option>
                                    <option value="blue-brown">Blue & Brown</option>
                                    <option value="purple-gold">Purple & Gold</option>
                                </optgroup>
                                <optgroup label="Fire & Ice">
                                    <option value="fire">Fire</option>
                                    <option value="hot-cold">Hot-Cold</option>
                                    <option value="ice">Ice</option>
                                    <option value="lava">Lava Flow</option>
                                    <option value="frozen">Frozen</option>
                                </optgroup>
                                <optgroup label="Rainbow & Spectrum">
                                    <option value="rainbow">Rainbow</option>
                                    <option value="rainbow-smooth">Smooth Rainbow</option>
                                    <option value="spectrum">Spectrum</option>
                                    <option value="hsv">HSV Wheel</option>
                                    <option value="hsl">HSL Wheel</option>
                                </optgroup>
                                <optgroup label="Nature">
                                    <option value="ocean">Ocean Depths</option>
                                    <option value="forest">Forest</option>
                                    <option value="sunset">Sunset</option>
                                    <option value="sunrise">Sunrise</option>
                                    <option value="aurora">Aurora Borealis</option>
                                    <option value="earth">Earth Tones</option>
                                    <option value="desert">Desert</option>
                                    <option value="tropical">Tropical</option>
                                </optgroup>
                                <optgroup label="Modern & Artistic">
                                    <option value="neon">Neon Glow</option>
                                    <option value="vaporwave">Vaporwave</option>
                                    <option value="cyberpunk">Cyberpunk</option>
                                    <option value="synthwave">Synthwave</option>
                                    <option value="pastel">Soft Pastel</option>
                                    <option value="candy">Candy</option>
                                    <option value="electric">Electric</option>
                                    <option value="noir">Film Noir</option>
                                </optgroup>
                                <optgroup label="Scientific (Perceptually Uniform)">
                                    <option value="viridis">Viridis</option>
                                    <option value="plasma">Plasma</option>
                                    <option value="magma">Magma</option>
                                    <option value="inferno">Inferno</option>
                                    <option value="turbo">Turbo</option>
                                    <option value="cividis">Cividis</option>
                                    <option value="cubehelix">Cubehelix</option>
                                </optgroup>
                                <optgroup label="Monochrome">
                                    <option value="grayscale">Grayscale</option>
                                    <option value="blue-mono">Blue Monochrome</option>
                                    <option value="red-mono">Red Monochrome</option>
                                    <option value="green-mono">Green Monochrome</option>
                                    <option value="sepia">Sepia</option>
                                </optgroup>
                                <optgroup label="High Contrast">
                                    <option value="zebra">Zebra (B&W)</option>
                                    <option value="chess">Chessboard</option>
                                    <option value="binary">Binary</option>
                                </optgroup>
                                <option value="custom">Custom...</option>
                            </select>
                        </div>
                        
                        <!-- Palette Preview -->
                        <div class="control-group">
                            <div class="palette-preview" role="img" aria-label="Current palette preview">
                                <canvas id="palette-canvas" width="280" height="28"></canvas>
                                <div class="palette-markers" id="palette-markers"></div>
                            </div>
                        </div>
                        
                        <!-- Palette Actions -->
                        <div class="btn-row">
                            <button id="btn-edit-palette" class="btn btn-secondary btn-grow" title="Open palette editor">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                                    <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                </svg>
                                <span>Edit</span>
                            </button>
                            <button id="btn-invert-palette" class="btn btn-sm" title="Invert palette colors">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 2v20"/>
                                </svg>
                            </button>
                            <button id="btn-reverse-palette" class="btn btn-sm" title="Reverse palette direction">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/>
                                </svg>
                            </button>
                            <button id="btn-randomize-palette" class="btn btn-sm" title="Generate random palette">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="4" y="4" width="6" height="6" rx="1"/>
                                    <rect x="14" y="4" width="6" height="6" rx="1"/>
                                    <rect x="4" y="14" width="6" height="6" rx="1"/>
                                    <rect x="14" y="14" width="6" height="6" rx="1"/>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Palette Interpolation -->
                        <div class="control-group">
                            <label for="palette-interpolation" class="control-label">
                                <span>Interpolation</span>
                                <button class="info-btn" data-tooltip="Color space used for blending between palette colors. LAB and OKLAB produce more perceptually uniform gradients.">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <select id="palette-interpolation" class="control-select">
                                <option value="rgb">RGB (Linear)</option>
                                <option value="hsl" selected>HSL (Hue-preserving)</option>
                                <option value="hsv">HSV</option>
                                <option value="lab">LAB (Perceptual)</option>
                                <option value="oklab">OKLAB (Modern Perceptual)</option>
                                <option value="oklch">OKLCH (Perceptual + Hue)</option>
                            </select>
                        </div>
                        
                        <!-- Palette Color Count -->
                        <div class="control-group">
                            <label for="palette-colors" class="control-label">
                                <span>Palette Size</span>
                                <span class="label-value" id="palette-colors-display">256</span>
                            </label>
                            <input type="range" id="palette-colors" class="control-range" min="16" max="4096" value="256" step="16">
                        </div>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: 3D Rendering (visible only in 3D mode)
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section id="section-3d-render" class="sidebar-section hidden" aria-labelledby="section-3d-render-title">
                    <h2 id="section-3d-render-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <circle cx="12" cy="12" r="5"/>
                            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                        </svg>
                        <span>3D Rendering</span>
                        <button class="collapse-btn" aria-expanded="true" aria-controls="3d-render-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="3d-render-content" class="section-content">
                        
                        <!-- Raymarching Quality -->
                        <div class="control-group">
                            <label for="raymarch-steps" class="control-label">
                                <span>Max Steps</span>
                                <span class="label-value" id="raymarch-steps-display">200</span>
                            </label>
                            <input type="range" id="raymarch-steps" class="control-range" min="50" max="1000" value="200" step="10">
                        </div>
                        
                        <!-- Surface Detail -->
                        <div class="control-group">
                            <label for="surface-detail" class="control-label">
                                <span>Surface Detail</span>
                                <span class="label-value" id="surface-detail-display">0.001</span>
                            </label>
                            <input type="range" id="surface-detail" class="control-range" min="0.00001" max="0.01" value="0.001" step="0.00001">
                        </div>
                        
                        <!-- Lighting Mode -->
                        <div class="control-group">
                            <label for="lighting-mode" class="control-label">Lighting</label>
                            <select id="lighting-mode" class="control-select">
                                <option value="phong" selected>Phong</option>
                                <option value="pbr">PBR (Physically Based)</option>
                                <option value="toon">Toon/Cel Shading</option>
                                <option value="matcap">MatCap</option>
                                <option value="normal">Normal Colors</option>
                                <option value="ao-only">AO Only</option>
                            </select>
                        </div>
                        
                        <!-- Light Position -->
                        <div class="control-group">
                            <label class="control-label">Light Position</label>
                            <div class="input-row">
                                <input type="range" id="light-theta" class="control-range" min="0" max="360" value="45" title="Horizontal angle">
                                <input type="range" id="light-phi" class="control-range" min="0" max="90" value="45" title="Vertical angle">
                            </div>
                        </div>
                        
                        <!-- Material Properties -->
                        <div class="control-group">
                            <label class="control-label">Material</label>
                            <div class="input-row">
                                <div class="input-with-label">
                                    <label for="material-diffuse">Diffuse</label>
                                    <input type="range" id="material-diffuse" class="control-range narrow" min="0" max="1" value="0.8" step="0.05">
                                </div>
                                <div class="input-with-label">
                                    <label for="material-specular">Specular</label>
                                    <input type="range" id="material-specular" class="control-range narrow" min="0" max="1" value="0.5" step="0.05">
                                </div>
                            </div>
                            <div class="input-row">
                                <div class="input-with-label">
                                    <label for="material-shininess">Shininess</label>
                                    <input type="range" id="material-shininess" class="control-range narrow" min="1" max="256" value="32">
                                </div>
                                <div class="input-with-label">
                                    <label for="material-fresnel">Fresnel</label>
                                    <input type="range" id="material-fresnel" class="control-range narrow" min="0" max="1" value="0.2" step="0.05">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ambient Occlusion -->
                        <div class="control-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="enable-ao" checked>
                                <span class="checkbox-custom"></span>
                                <span>Ambient Occlusion</span>
                            </label>
                            <div class="input-with-label">
                                <label for="ao-strength">Strength</label>
                                <input type="range" id="ao-strength" class="control-range" min="0" max="1" value="0.5" step="0.05">
                            </div>
                            <div class="input-with-label">
                                <label for="ao-samples">Samples</label>
                                <input type="range" id="ao-samples" class="control-range" min="1" max="16" value="5" step="1">
                            </div>
                        </div>
                        
                        <!-- Shadows -->
                        <div class="control-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="enable-shadows" checked>
                                <span class="checkbox-custom"></span>
                                <span>Soft Shadows</span>
                            </label>
                            <div class="input-with-label">
                                <label for="shadow-softness">Softness</label>
                                <input type="range" id="shadow-softness" class="control-range" min="1" max="64" value="16">
                            </div>
                        </div>
                        
                        <!-- Fog/Atmosphere -->
                        <div class="control-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="enable-fog">
                                <span class="checkbox-custom"></span>
                                <span>Fog/Atmosphere</span>
                            </label>
                            <div class="input-with-label">
                                <label for="fog-density">Density</label>
                                <input type="range" id="fog-density" class="control-range" min="0" max="2" value="0.5" step="0.1">
                            </div>
                            <div class="input-with-label">
                                <label for="fog-color">Color</label>
                                <input type="color" id="fog-color" class="control-color" value="#1a1a2e">
                            </div>
                        </div>
                        
                        <!-- Background -->
                        <div class="control-group">
                            <label for="background-type" class="control-label">Background</label>
                            <select id="background-type" class="control-select">
                                <option value="solid">Solid Color</option>
                                <option value="gradient" selected>Gradient</option>
                                <option value="sky">Sky Gradient</option>
                                <option value="environment">Environment Map</option>
                                <option value="transparent">Transparent</option>
                            </select>
                            <div class="input-row">
                                <input type="color" id="bg-color-top" class="control-color" value="#0a0a1a" title="Top/Primary color">
                                <input type="color" id="bg-color-bottom" class="control-color" value="#1a1a2e" title="Bottom/Secondary color">
                            </div>
                        </div>
                        
                        <!-- Glow/Bloom -->
                        <div class="control-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="enable-glow">
                                <span class="checkbox-custom"></span>
                                <span>Glow/Bloom Effect</span>
                            </label>
                            <div class="input-with-label">
                                <label for="glow-intensity">Intensity</label>
                                <input type="range" id="glow-intensity" class="control-range" min="0" max="2" value="0.5" step="0.1">
                            </div>
                        </div>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Camera
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-camera-title">
                    <h2 id="section-camera-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
                            <circle cx="12" cy="13" r="4"/>
                        </svg>
                        <span>Camera</span>
                        <button class="collapse-btn" aria-expanded="true" aria-controls="camera-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="camera-content" class="section-content">
                        
                        <!-- 2D Camera Controls -->
                        <div id="camera-2d-controls">
                            <!-- Center Position -->
                            <div class="control-group">
                                <label class="control-label">
                                    <span>Center Position</span>
                                    <button class="btn btn-xs" id="btn-copy-coords" title="Copy coordinates">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2"/>
                                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                                        </svg>
                                    </button>
                                </label>
                                <div class="position-inputs">
                                    <div class="input-with-label">
                                        <label for="center-real">Re</label>
                                        <input type="text" id="center-real" class="control-input mono" value="-0.5" placeholder="Real" aria-label="Real coordinate">
                                    </div>
                                    <div class="input-with-label">
                                        <label for="center-imag">Im</label>
                                        <input type="text" id="center-imag" class="control-input mono" value="0" placeholder="Imag" aria-label="Imaginary coordinate">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Zoom Level -->
                            <div class="control-group">
                                <label for="zoom-level" class="control-label">
                                    <span>Zoom Level</span>
                                </label>
                                <div class="range-input-combo">
                                    <input type="range" id="zoom-level" class="control-range" min="-10" max="2000" value="0" step="0.1">
                                    <input type="text" id="zoom-level-value" class="control-input narrow mono" value="1" title="Zoom magnification">
                                </div>
                                <div class="zoom-info">
                                    <span class="zoom-exponent" id="zoom-exponent">10^0</span>
                                    <span class="zoom-mag" id="zoom-mag">= 1Ã—</span>
                                </div>
                            </div>
                            
                            <!-- Rotation -->
                            <div class="control-group">
                                <label for="rotation" class="control-label">
                                    <span>Rotation</span>
                                    <span class="label-value" id="rotation-display">0Â°</span>
                                </label>
                                <input type="range" id="rotation" class="control-range" min="-180" max="180" value="0" step="0.5">
                            </div>
                            
                            <!-- Aspect Ratio Lock -->
                            <div class="control-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="lock-aspect" checked>
                                    <span class="checkbox-custom"></span>
                                    <span>Lock Aspect Ratio</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- 3D Camera Controls -->
                        <div id="camera-3d-controls" class="hidden">
                            <!-- Camera Mode -->
                            <div class="control-group">
                                <label class="control-label">Camera Mode</label>
                                <div class="radio-group horizontal">
                                    <label class="radio-label">
                                        <input type="radio" name="camera-mode" value="orbit" checked>
                                        <span class="radio-custom"></span>
                                        <span>Orbit</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="camera-mode" value="fly">
                                        <span class="radio-custom"></span>
                                        <span>Fly</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="camera-mode" value="first-person">
                                        <span class="radio-custom"></span>
                                        <span>FPS</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Field of View -->
                            <div class="control-group">
                                <label for="camera-fov" class="control-label">
                                    <span>Field of View</span>
                                    <span class="label-value" id="camera-fov-display">60Â°</span>
                                </label>
                                <input type="range" id="camera-fov" class="control-range" min="10" max="120" value="60">
                            </div>
                            
                            <!-- Distance -->
                            <div class="control-group">
                                <label for="camera-distance" class="control-label">
                                    <span>Distance</span>
                                    <span class="label-value" id="camera-distance-display">3.0</span>
                                </label>
                                <input type="range" id="camera-distance" class="control-range" min="0.1" max="20" value="3" step="0.1">
                            </div>
                            
                            <!-- Target -->
                            <div class="control-group">
                                <label class="control-label">Look At</label>
                                <div class="input-row">
                                    <input type="number" id="target-x" class="control-input narrow mono" value="0" step="0.1" title="X">
                                    <input type="number" id="target-y" class="control-input narrow mono" value="0" step="0.1" title="Y">
                                    <input type="number" id="target-z" class="control-input narrow mono" value="0" step="0.1" title="Z">
                                </div>
                            </div>
                            
                            <!-- Movement Speed -->
                            <div class="control-group">
                                <label for="move-speed" class="control-label">
                                    <span>Move Speed</span>
                                </label>
                                <input type="range" id="move-speed" class="control-range" min="0.1" max="5" value="1" step="0.1">
                            </div>
                        </div>
                        
                        <!-- Quick Navigation -->
                        <div class="control-group">
                            <label class="control-label">Quick Actions</label>
                            <div class="btn-row">
                                <button id="btn-reset-view" class="btn btn-sm" title="Reset to default view (H)">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                                    </svg>
                                    Reset
                                </button>
                                <button id="btn-center-origin" class="btn btn-sm" title="Center on origin (0,0)">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <circle cx="12" cy="12" r="1"/>
                                    </svg>
                                    Origin
                                </button>
                                <button id="btn-fit-set" class="btn btn-sm" title="Fit entire fractal in view">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
                                    </svg>
                                    Fit
                                </button>
                            </div>
                        </div>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Gallery
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-gallery-title">
                    <h2 id="section-gallery-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                        </svg>
                        <span>Gallery</span>
                        <span class="badge" id="gallery-count" title="Total preset locations">1000+</span>
                        <button class="collapse-btn" aria-expanded="true" aria-controls="gallery-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="gallery-content" class="section-content">
                        
                        <!-- Search -->
                        <div class="control-group">
                            <div class="search-input">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="M21 21l-4.35-4.35"/>
                                </svg>
                                <input 
                                    type="text" 
                                    id="gallery-search" 
                                    class="control-input" 
                                    placeholder="Search locations..."
                                    aria-label="Search gallery locations"
                                >
                                <button class="search-clear hidden" id="gallery-search-clear" aria-label="Clear search">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M18 6L6 18M6 6l12 12"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Filters -->
                        <div class="control-group">
                            <div class="filter-chips" role="group" aria-label="Gallery filters">
                                <button class="filter-chip active" data-filter="all" aria-pressed="true">All</button>
                                <button class="filter-chip" data-filter="mandelbrot" aria-pressed="false">Mandelbrot</button>
                                <button class="filter-chip" data-filter="julia" aria-pressed="false">Julia</button>
                                <button class="filter-chip" data-filter="burning-ship" aria-pressed="false">Burning Ship</button>
                                <button class="filter-chip" data-filter="deep" aria-pressed="false">Deep Zoom</button>
                                <button class="filter-chip" data-filter="famous" aria-pressed="false">Famous</button>
                                <button class="filter-chip" data-filter="3d" aria-pressed="false">3D</button>
                                <button class="filter-chip" data-filter="bookmarks" aria-pressed="false">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                                    </svg>
                                    Bookmarks
                                </button>
                            </div>
                        </div>
                        
                        <!-- Sort -->
                        <div class="control-group inline-group">
                            <label for="gallery-sort" class="control-label compact">Sort:</label>
                            <select id="gallery-sort" class="control-select compact">
                                <option value="name">Name</option>
                                <option value="zoom-asc">Zoom (lowâ†’high)</option>
                                <option value="zoom-desc" selected>Zoom (highâ†’low)</option>
                                <option value="recent">Recently Added</option>
                                <option value="popular">Most Popular</option>
                            </select>
                        </div>
                        
                        <!-- Gallery Grid -->
                        <div 
                            id="gallery-grid" 
                            class="gallery-grid" 
                            role="listbox" 
                            aria-label="Fractal locations"
                            tabindex="0"
                        >
                            <!-- Gallery items populated dynamically -->
                            <div class="gallery-loading">
                                <div class="loading-spinner small"></div>
                                <span>Loading gallery...</span>
                            </div>
                        </div>
                        
                        <!-- Pagination -->
                        <div class="gallery-pagination" id="gallery-pagination">
                            <button id="gallery-prev" class="btn btn-sm" disabled aria-label="Previous page">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 18l-6-6 6-6"/>
                                </svg>
                            </button>
                            <span class="page-info">
                                <span id="gallery-page">1</span>
                                <span>/</span>
                                <span id="gallery-total-pages">1</span>
                            </span>
                            <button id="gallery-next" class="btn btn-sm" aria-label="Next page">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Full Gallery Button -->
                        <button id="btn-full-gallery" class="btn btn-secondary btn-block">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
                                <polyline points="15 3 21 3 21 9"/>
                                <line x1="10" y1="14" x2="21" y2="3"/>
                            </svg>
                            <span>Open Full Gallery</span>
                        </button>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Animation (Collapsed by default)
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-animation-title">
                    <h2 id="section-animation-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <polygon points="5 3 19 12 5 21 5 3"/>
                        </svg>
                        <span>Animation</span>
                        <button class="collapse-btn" aria-expanded="false" aria-controls="animation-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="animation-content" class="section-content collapsed">
                        
                        <!-- Animation Type -->
                        <div class="control-group">
                            <label for="animation-type" class="control-label">Type</label>
                            <select id="animation-type" class="control-select">
                                <option value="zoom" selected>Zoom In/Out</option>
                                <option value="path">Custom Path</option>
                                <option value="parameter">Parameter Morph</option>
                                <option value="julia-sweep">Julia Sweep</option>
                                <option value="palette">Palette Cycle</option>
                                <option value="rotation">Rotation</option>
                                <option value="orbit">3D Orbit</option>
                            </select>
                        </div>
                        
                        <!-- Keyframes -->
                        <div class="control-group">
                            <label class="control-label">
                                <span>Keyframes</span>
                                <span class="label-value" id="keyframe-count">0</span>
                            </label>
                            <div id="keyframe-list" class="keyframe-list">
                                <div class="keyframe-empty">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 8v8M8 12h8"/>
                                    </svg>
                                    <span>No keyframes yet</span>
                                    <span class="keyframe-hint">Add current view as keyframe</span>
                                </div>
                            </div>
                            <div class="btn-row">
                                <button id="btn-add-keyframe" class="btn btn-sm btn-grow">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 8v8M8 12h8"/>
                                    </svg>
                                    Add Current
                                </button>
                                <button id="btn-clear-keyframes" class="btn btn-sm">Clear All</button>
                            </div>
                        </div>
                        
                        <!-- Duration -->
                        <div class="control-group">
                            <label for="anim-duration" class="control-label">
                                <span>Duration</span>
                                <span class="label-value" id="anim-duration-display">10s</span>
                            </label>
                            <input type="range" id="anim-duration" class="control-range" min="1" max="300" value="10">
                        </div>
                        
                        <!-- Frame Rate -->
                        <div class="control-group">
                            <label for="anim-fps" class="control-label">Frame Rate</label>
                            <select id="anim-fps" class="control-select">
                                <option value="15">15 FPS</option>
                                <option value="24">24 FPS (Film)</option>
                                <option value="30" selected>30 FPS</option>
                                <option value="60">60 FPS (Smooth)</option>
                            </select>
                        </div>
                        
                        <!-- Easing -->
                        <div class="control-group">
                            <label for="anim-easing" class="control-label">Easing</label>
                            <select id="anim-easing" class="control-select">
                                <option value="linear">Linear</option>
                                <option value="ease-in">Ease In</option>
                                <option value="ease-out">Ease Out</option>
                                <option value="ease-in-out" selected>Ease In/Out</option>
                                <option value="exponential">Exponential (for zoom)</option>
                                <option value="cubic">Cubic</option>
                            </select>
                        </div>
                        
                        <!-- Loop -->
                        <div class="control-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="anim-loop">
                                <span class="checkbox-custom"></span>
                                <span>Loop Animation</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="anim-pingpong">
                                <span class="checkbox-custom"></span>
                                <span>Ping-Pong (reverse at end)</span>
                            </label>
                        </div>
                        
                        <!-- Animation Controls -->
                        <div class="animation-controls">
                            <button id="btn-anim-play" class="btn btn-primary btn-grow">
                                <svg class="icon icon-play" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="5 3 19 12 5 21 5 3"/>
                                </svg>
                                <svg class="icon icon-pause hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="6" y="4" width="4" height="16"/>
                                    <rect x="14" y="4" width="4" height="16"/>
                                </svg>
                                <span class="btn-text">Preview</span>
                            </button>
                            <button id="btn-anim-stop" class="btn btn-secondary" disabled>
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="4" y="4" width="16" height="16"/>
                                </svg>
                            </button>
                            <button id="btn-anim-export" class="btn btn-secondary">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Export
                            </button>
                        </div>
                        
                        <!-- Progress (shown during animation/export) -->
                        <div id="anim-progress" class="anim-progress hidden">
                            <div class="progress-bar">
                                <div class="progress-fill" id="anim-progress-fill"></div>
                            </div>
                            <span class="progress-text" id="anim-progress-text">0%</span>
                        </div>
                        
                    </div>
                </section>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Custom Formula (Collapsed by default)
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-formula-title">
                    <h2 id="section-formula-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M4 7h6M4 17h10M9 4v16"/>
                            <path d="M15 4l4 4-4 4"/>
                            <path d="M19 16l-4 4"/>
                        </svg>
                        <span>Custom Formula</span>
                        <span class="badge badge-beta">Beta</span>
                        <button class="collapse-btn" aria-expanded="false" aria-controls="formula-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="formula-content" class="section-content collapsed">
                        
                        <!-- Formula Input -->
                        <div class="control-group">
                            <label for="custom-formula" class="control-label">
                                <span>Iteration Formula</span>
                                <button class="info-btn" data-tooltip="Enter a formula using z (current value), c (constant/pixel), and standard math functions. Examples: z^2+c, z^3+c, sin(z)+c">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <textarea 
                                id="custom-formula" 
                                class="control-textarea mono" 
                                rows="3"
                                placeholder="z^2 + c"
                                aria-describedby="formula-syntax"
                                spellcheck="false"
                            >z^2 + c</textarea>
                        </div>
                        
                        <!-- Syntax Help -->
                        <div id="formula-syntax" class="formula-syntax">
                            <div class="syntax-header">Syntax Reference</div>
                            <div class="syntax-grid">
                                <span class="syntax-label">Variables:</span>
                                <span class="syntax-value">z, c, n (iteration)</span>
                                <span class="syntax-label">Operators:</span>
                                <span class="syntax-value">+ - * / ^ (power)</span>
                                <span class="syntax-label">Functions:</span>
                                <span class="syntax-value">sin, cos, tan, exp, log, sqrt, abs</span>
                                <span class="syntax-label">Complex:</span>
                                <span class="syntax-value">re(), im(), conj(), arg(), norm()</span>
                                <span class="syntax-label">Constants:</span>
                                <span class="syntax-value">pi, e, i</span>
                            </div>
                        </div>
                        
                        <!-- Formula Presets -->
                        <div class="control-group">
                            <label for="formula-preset" class="control-label">Presets</label>
                            <select id="formula-preset" class="control-select">
                                <option value="">Select a preset...</option>
                                <optgroup label="Power Variations">
                                    <option value="z^2+c">zÂ² + c (Mandelbrot)</option>
                                    <option value="z^3+c">zÂ³ + c (Cubic)</option>
                                    <option value="z^4+c">zâ´ + c (Quartic)</option>
                                    <option value="z^5+c">zâµ + c (Quintic)</option>
                                    <option value="z^6+c">zâ¶ + c (Sextic)</option>
                                </optgroup>
                                <optgroup label="Variants">
                                    <option value="(abs(re(z))+i*abs(im(z)))^2+c">Burning Ship</option>
                                    <option value="conj(z)^2+c">Tricorn</option>
                                    <option value="(abs(re(z))+i*im(z))^2+c">Celtic</option>
                                    <option value="(re(z)+i*abs(im(z)))^2+c">Buffalo</option>
                                </optgroup>
                                <optgroup label="Trigonometric">
                                    <option value="c*sin(z)">cÂ·sin(z)</option>
                                    <option value="c*cos(z)">cÂ·cos(z)</option>
                                    <option value="z^2+sin(z)+c">zÂ² + sin(z) + c</option>
                                    <option value="sin(z)*cos(z)+c">sin(z)Â·cos(z) + c</option>
                                </optgroup>
                                <optgroup label="Exponential">
                                    <option value="c*exp(z)">cÂ·exp(z)</option>
                                    <option value="exp(z^2)+c">exp(zÂ²) + c</option>
                                    <option value="z*exp(z)+c">zÂ·exp(z) + c</option>
                                </optgroup>
                                <optgroup label="Rational">
                                    <option value="z^2+c/(z+1)">zÂ² + c/(z+1)</option>
                                    <option value="z-(z^3-1)/(3*z^2)">Newton zÂ³-1</option>
                                    <option value="((z^2+c-1)/(2*z+c-2))^2">Magnet Type 1</option>
                                </optgroup>
                                <optgroup label="Experimental">
                                    <option value="z^2+z/c+c">zÂ² + z/c + c</option>
                                    <option value="z^3-z+c">zÂ³ - z + c</option>
                                    <option value="(z^2+c)/(z^2-c)">Rational (zÂ²+c)/(zÂ²-c)</option>
                                    <option value="z^2+c+0.1*sin(10*arg(z))">Spiral Perturbation</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <!-- Initial Value -->
                        <div class="control-group">
                            <label class="control-label">Initial zâ‚€</label>
                            <div class="dual-input">
                                <div class="input-with-label">
                                    <label for="z0-real">Re</label>
                                    <input type="number" id="z0-real" class="control-input narrow mono" value="0" step="0.1">
                                </div>
                                <div class="input-with-label">
                                    <label for="z0-imag">Im</label>
                                    <input type="number" id="z0-imag" class="control-input narrow mono" value="0" step="0.1">
                                </div>
                            </div>
                            <label class="checkbox-label">
                                <input type="checkbox" id="z0-use-pixel" checked>
                                <span class="checkbox-custom"></span>
                                <span>Use pixel as c (Mandelbrot-type)</span>
                            </label>
                        </div>
                        
                        <!-- Validation Status -->
                        <div class="formula-status" id="formula-status">
                            <div class="status-icon status-valid">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                    <polyline points="22 4 12 14.01 9 11.01"/>
                                </svg>
                            </div>
                            <div class="status-icon status-invalid hidden">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M15 9l-6 6M9 9l6 6"/>
                                </svg>
                            </div>
                            <span class="status-text" id="formula-status-text">Formula valid</span>
                        </div>
                        
                        <!-- Apply Button -->
                        <div class="btn-row">
                            <button id="btn-apply-formula" class="btn btn-primary btn-grow">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                Apply Formula
                            </button>
                            <button id="btn-save-formula" class="btn btn-secondary" title="Save to presets">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                                    <polyline points="17 21 17 13 7 13 7 21"/>
                                    <polyline points="7 3 7 8 15 8"/>
                                </svg>
                            </button>
                        </div>
                        
                    </div>
                </section>
                
            </div><!-- /sidebar-content -->

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 SIDEBAR FOOTER
                 Quick access buttons and theme toggle
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <footer class="sidebar-footer">
                <button id="btn-bookmarks-sidebar" class="icon-btn" title="View Bookmarks" aria-label="Open bookmarks panel">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                    </svg>
                    <span class="btn-badge" id="bookmark-count" hidden>0</span>
                </button>
                
                <button id="btn-history-sidebar" class="icon-btn" title="View History" aria-label="Open history panel">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </button>
                
                <button id="btn-math-info" class="icon-btn" title="Math Background" aria-label="View mathematical information">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
                        <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                    </svg>
                </button>
                
                <button id="btn-random-location" class="icon-btn" title="Random Location (R)" aria-label="Go to random location">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="4" y="4" width="6" height="6" rx="1"/>
                        <rect x="14" y="4" width="6" height="6" rx="1"/>
                        <rect x="4" y="14" width="6" height="6" rx="1"/>
                        <rect x="14" y="14" width="6" height="6" rx="1"/>
                    </svg>
                </button>
                
                <div class="sidebar-footer-spacer"></div>
                
                <button id="btn-theme-toggle" class="icon-btn" title="Toggle Theme (T)" aria-label="Toggle light/dark theme">
                    <svg class="icon icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="icon icon-moon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                    </svg>
                </button>
            </footer>
            
        </aside><!-- /sidebar -->

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             FLOATING ZOOM CONTROLS
             Always visible zoom buttons
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="zoom-controls" class="zoom-controls" role="group" aria-label="Zoom controls">
            <button 
                id="btn-zoom-in" 
                class="zoom-btn" 
                title="Zoom In (+)" 
                aria-label="Zoom in"
            >
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                    <path d="M11 8v6M8 11h6"/>
                </svg>
            </button>
            <button 
                id="btn-zoom-out" 
                class="zoom-btn" 
                title="Zoom Out (-)" 
                aria-label="Zoom out"
            >
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                    <path d="M8 11h6"/>
                </svg>
            </button>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TOAST NOTIFICATION CONTAINER
             For non-blocking status messages
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div 
            id="toast-container" 
            class="toast-container" 
            role="region" 
            aria-label="Notifications"
            aria-live="polite"
        ></div>

    </div><!-- /app -->

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MODALS
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SETTINGS MODAL
         Application preferences and configuration
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-settings" 
        class="modal" 
        role="dialog" 
        aria-modal="true" 
        aria-labelledby="settings-title"
        hidden
    >
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-content modal-lg">
            <header class="modal-header">
                <h2 id="settings-title" class="modal-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                    </svg>
                    Settings
                </h2>
                <button class="modal-close" data-dismiss="modal" aria-label="Close settings">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Settings Navigation Tabs -->
                <div class="settings-tabs" role="tablist" aria-label="Settings categories">
                    <button class="settings-tab active" role="tab" aria-selected="true" aria-controls="settings-performance" data-tab="performance">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                        </svg>
                        <span>Performance</span>
                    </button>
                    <button class="settings-tab" role="tab" aria-selected="false" aria-controls="settings-display" data-tab="display">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="3" width="20" height="14" rx="2"/>
                            <path d="M8 21h8M12 17v4"/>
                        </svg>
                        <span>Display</span>
                    </button>
                    <button class="settings-tab" role="tab" aria-selected="false" aria-controls="settings-interaction" data-tab="interaction">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 01-3.46 0"/>
                        </svg>
                        <span>Interaction</span>
                    </button>
                    <button class="settings-tab" role="tab" aria-selected="false" aria-controls="settings-export" data-tab="export">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <span>Export</span>
                    </button>
                    <button class="settings-tab" role="tab" aria-selected="false" aria-controls="settings-data" data-tab="data">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <ellipse cx="12" cy="5" rx="9" ry="3"/>
                            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
                        </svg>
                        <span>Data</span>
                    </button>
                </div>
                
                <!-- Performance Settings -->
                <div id="settings-performance" class="settings-panel active" role="tabpanel" aria-labelledby="tab-performance">
                    <h3 class="settings-section-title">Rendering Performance</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">
                            <span>Renderer</span>
                            <span class="settings-hint">GPU acceleration for better performance</span>
                        </label>
                        <select id="setting-renderer" class="control-select compact">
                            <option value="webgl" selected>WebGL (Recommended)</option>
                            <option value="webgl2">WebGL 2</option>
                            <option value="canvas">Canvas 2D (Fallback)</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-webgl" checked>
                            <span class="checkbox-custom"></span>
                            <span>Enable WebGL acceleration</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-workers" checked>
                            <span class="checkbox-custom"></span>
                            <span>Use Web Workers</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">
                            <span>Worker Threads</span>
                            <span class="settings-hint">More threads = faster rendering</span>
                        </label>
                        <select id="setting-threads" class="control-select compact">
                            <option value="auto" selected>Auto (detect)</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="4">4</option>
                            <option value="8">8</option>
                            <option value="16">16</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-progressive" checked>
                            <span class="checkbox-custom"></span>
                            <span>Progressive rendering</span>
                        </label>
                        <span class="settings-hint">Show low-res preview while rendering</span>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">
                            <span>Tile Size</span>
                            <span class="settings-hint">Smaller tiles show progress faster</span>
                        </label>
                        <select id="setting-tile-size" class="control-select compact">
                            <option value="32">32Ã—32</option>
                            <option value="64">64Ã—64</option>
                            <option value="128" selected>128Ã—128</option>
                            <option value="256">256Ã—256</option>
                            <option value="512">512Ã—512</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">
                            <span>Preview Quality</span>
                        </label>
                        <select id="setting-preview-quality" class="control-select compact">
                            <option value="low">Low (fastest)</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High (slowest)</option>
                        </select>
                    </div>
                    
                    <h3 class="settings-section-title">Memory Management</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">
                            <span>Texture Cache Size</span>
                        </label>
                        <select id="setting-cache-size" class="control-select compact">
                            <option value="128">128 MB</option>
                            <option value="256" selected>256 MB</option>
                            <option value="512">512 MB</option>
                            <option value="1024">1024 MB</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-auto-gc" checked>
                            <span class="checkbox-custom"></span>
                            <span>Auto garbage collection</span>
                        </label>
                    </div>
                </div>
                
                <!-- Display Settings -->
                <div id="settings-display" class="settings-panel" role="tabpanel" aria-labelledby="tab-display" hidden>
                    <h3 class="settings-section-title">Overlay Elements</h3>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-coords" checked>
                            <span class="checkbox-custom"></span>
                            <span>Show coordinates display</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-minimap" checked>
                            <span class="checkbox-custom"></span>
                            <span>Show minimap</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-perf-stats">
                            <span class="checkbox-custom"></span>
                            <span>Show performance stats</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-crosshair">
                            <span class="checkbox-custom"></span>
                            <span>Show center crosshair</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-histogram">
                            <span class="checkbox-custom"></span>
                            <span>Show iteration histogram</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-mouse-coords" checked>
                            <span class="checkbox-custom"></span>
                            <span>Show mouse coordinates</span>
                        </label>
                    </div>
                    
                    <h3 class="settings-section-title">Coordinate Format</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">Number Format</label>
                        <select id="setting-number-format" class="control-select compact">
                            <option value="scientific" selected>Scientific (1.234e-10)</option>
                            <option value="decimal">Decimal</option>
                            <option value="engineering">Engineering</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">Precision (digits)</label>
                        <input type="number" id="setting-display-precision" class="control-input narrow" value="15" min="3" max="100">
                    </div>
                    
                    <h3 class="settings-section-title">Theme</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">Color Theme</label>
                        <select id="setting-theme" class="control-select compact">
                            <option value="dark" selected>Dark</option>
                            <option value="light">Light</option>
                            <option value="system">System Default</option>
                            <option value="midnight">Midnight</option>
                            <option value="ocean">Ocean</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">Accent Color</label>
                        <div class="accent-colors">
                            <button class="accent-btn active" data-color="#6366f1" style="background:#6366f1" aria-label="Purple accent"></button>
                            <button class="accent-btn" data-color="#3b82f6" style="background:#3b82f6" aria-label="Blue accent"></button>
                            <button class="accent-btn" data-color="#10b981" style="background:#10b981" aria-label="Green accent"></button>
                            <button class="accent-btn" data-color="#f59e0b" style="background:#f59e0b" aria-label="Yellow accent"></button>
                            <button class="accent-btn" data-color="#ef4444" style="background:#ef4444" aria-label="Red accent"></button>
                            <button class="accent-btn" data-color="#ec4899" style="background:#ec4899" aria-label="Pink accent"></button>
                        </div>
                    </div>
                </div>
                
                <!-- Interaction Settings -->
                <div id="settings-interaction" class="settings-panel" role="tabpanel" aria-labelledby="tab-interaction" hidden>
                    <h3 class="settings-section-title">Navigation</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">
                            <span>Zoom Speed</span>
                            <span class="label-value" id="zoom-speed-display">1.0Ã—</span>
                        </label>
                        <input type="range" id="setting-zoom-speed" class="control-range" min="0.25" max="4" value="1" step="0.25">
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">
                            <span>Pan Speed</span>
                            <span class="label-value" id="pan-speed-display">1.0Ã—</span>
                        </label>
                        <input type="range" id="setting-pan-speed" class="control-range" min="0.25" max="4" value="1" step="0.25">
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-smooth-zoom" checked>
                            <span class="checkbox-custom"></span>
                            <span>Smooth zoom animation</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-invert-scroll">
                            <span class="checkbox-custom"></span>
                            <span>Invert scroll direction</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-zoom-to-cursor" checked>
                            <span class="checkbox-custom"></span>
                            <span>Zoom to cursor position</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-double-click-zoom" checked>
                            <span class="checkbox-custom"></span>
                            <span>Double-click to zoom</span>
                        </label>
                    </div>
                    
                    <h3 class="settings-section-title">Mouse Buttons</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">Left Click</label>
                        <select id="setting-left-click" class="control-select compact">
                            <option value="pan" selected>Pan</option>
                            <option value="zoom-in">Zoom In</option>
                            <option value="select">Box Select</option>
                            <option value="julia">Pick Julia</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">Right Click</label>
                        <select id="setting-right-click" class="control-select compact">
                            <option value="context" selected>Context Menu</option>
                            <option value="zoom-out">Zoom Out</option>
                            <option value="pan">Pan</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">Middle Click</label>
                        <select id="setting-middle-click" class="control-select compact">
                            <option value="pan" selected>Pan</option>
                            <option value="zoom-reset">Reset Zoom</option>
                            <option value="none">None</option>
                        </select>
                    </div>
                    
                    <h3 class="settings-section-title">Touch Gestures</h3>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-pinch-zoom" checked>
                            <span class="checkbox-custom"></span>
                            <span>Pinch to zoom</span>
                        </label>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-two-finger-pan" checked>
                            <span class="checkbox-custom"></span>
                            <span>Two-finger pan</span>
                        </label>
                    </div>
                </div>
                
                <!-- Export Settings -->
                <div id="settings-export" class="settings-panel" role="tabpanel" aria-labelledby="tab-export" hidden>
                    <h3 class="settings-section-title">Default Export Settings</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">Default Resolution</label>
                        <select id="setting-default-resolution" class="control-select compact">
                            <option value="1920x1080">1080p (1920Ã—1080)</option>
                            <option value="2560x1440">1440p (2560Ã—1440)</option>
                            <option value="3840x2160" selected>4K (3840Ã—2160)</option>
                            <option value="7680x4320">8K (7680Ã—4320)</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">Default Format</label>
                        <select id="setting-default-format" class="control-select compact">
                            <option value="png" selected>PNG (Lossless)</option>
                            <option value="jpg">JPEG (Smaller)</option>
                            <option value="webp">WebP (Modern)</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">JPEG Quality</label>
                        <input type="range" id="setting-jpeg-quality" class="control-range" min="50" max="100" value="95">
                        <span class="label-value" id="jpeg-quality-display">95%</span>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">Default Supersampling</label>
                        <select id="setting-default-supersample" class="control-select compact">
                            <option value="1">1Ã— (No antialiasing)</option>
                            <option value="2" selected>2Ã— (Recommended)</option>
                            <option value="4">4Ã— (High quality)</option>
                            <option value="8">8Ã— (Ultra)</option>
                        </select>
                    </div>
                    
                    <h3 class="settings-section-title">File Naming</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">Filename Template</label>
                        <input type="text" id="setting-filename-template" class="control-input" value="abyss_{fractal}_{timestamp}">
                        <span class="settings-hint">Variables: {fractal}, {timestamp}, {zoom}, {resolution}</span>
                    </div>
                    
                    <div class="settings-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-embed-metadata" checked>
                            <span class="checkbox-custom"></span>
                            <span>Embed coordinates in image metadata</span>
                        </label>
                    </div>
                    
                    <h3 class="settings-section-title">Animation Export</h3>
                    
                    <div class="settings-row">
                        <label class="settings-label">Default Video Format</label>
                        <select id="setting-video-format" class="control-select compact">
                            <option value="webm" selected>WebM (VP9)</option>
                            <option value="mp4">MP4 (H.264)</option>
                            <option value="gif">GIF (Animated)</option>
                            <option value="frames">PNG Sequence</option>
                        </select>
                    </div>
                    
                    <div class="settings-row">
                        <label class="settings-label">Video Bitrate</label>
                        <select id="setting-video-bitrate" class="control-select compact">
                            <option value="5M">5 Mbps (Small)</option>
                            <option value="10M" selected>10 Mbps (Medium)</option>
                            <option value="20M">20 Mbps (High)</option>
                            <option value="50M">50 Mbps (Ultra)</option>
                        </select>
                    </div>
                </div>
                
                <!-- Data Management Settings -->
                <div id="settings-data" class="settings-panel" role="tabpanel" aria-labelledby="tab-data" hidden>
                    <h3 class="settings-section-title">Local Storage</h3>
                    
                    <div class="storage-info">
                        <div class="storage-row">
                            <span>Bookmarks</span>
                            <span id="storage-bookmarks">0 items</span>
                        </div>
                        <div class="storage-row">
                            <span>History</span>
                            <span id="storage-history">0 items</span>
                        </div>
                        <div class="storage-row">
                            <span>Custom Palettes</span>
                            <span id="storage-palettes">0 items</span>
                        </div>
                        <div class="storage-row">
                            <span>Custom Formulas</span>
                            <span id="storage-formulas">0 items</span>
                        </div>
                        <div class="storage-row storage-total">
                            <span>Total Used</span>
                            <span id="storage-total">0 KB</span>
                        </div>
                    </div>
                    
                    <h3 class="settings-section-title">Data Actions</h3>
                    
                    <div class="btn-group-vertical">
                        <button id="btn-export-bookmarks" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                            Export Bookmarks
                        </button>
                        <button id="btn-import-bookmarks" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            Import Bookmarks
                        </button>
                        <button id="btn-export-all-data" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                            Export All Data
                        </button>
                    </div>
                    
                    <h3 class="settings-section-title">Clear Data</h3>
                    
                    <div class="btn-group-vertical">
                        <button id="btn-clear-bookmarks" class="btn btn-secondary btn-danger-hover">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                            </svg>
                            Clear Bookmarks
                        </button>
                        <button id="btn-clear-history" class="btn btn-secondary btn-danger-hover">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            Clear History
                        </button>
                        <button id="btn-clear-cache" class="btn btn-secondary btn-danger-hover">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"/>
                                <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                            Clear Cache
                        </button>
                        <button id="btn-reset-all" class="btn btn-danger">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                                <line x1="12" y1="9" x2="12" y2="13"/>
                                <line x1="12" y1="17" x2="12.01" y2="17"/>
                            </svg>
                            Reset All Settings
                        </button>
                    </div>
                </div>
            </div>
            
            <footer class="modal-footer">
                <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button class="btn btn-primary" id="btn-save-settings">Save Changes</button>
            </footer>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         EXPORT MODAL
         High-resolution image export settings
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-export" 
        class="modal" 
        role="dialog" 
        aria-modal="true" 
        aria-labelledby="export-title"
        hidden
    >
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="export-title" class="modal-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    Export Image
                </h2>
                <button class="modal-close" data-dismiss="modal" aria-label="Close export dialog">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Preview -->
                <div class="export-preview-container">
                    <canvas id="export-preview-canvas" class="export-preview-canvas"></canvas>
                    <div class="export-preview-overlay">
                        <span id="export-preview-resolution">3840 Ã— 2160</span>
                    </div>
                </div>
                
                <!-- Resolution -->
                <div class="control-group">
                    <label class="control-label">Resolution</label>
                    <div class="resolution-presets" role="group" aria-label="Resolution presets">
                        <button class="resolution-btn" data-res="1280x720" aria-pressed="false">720p</button>
                        <button class="resolution-btn" data-res="1920x1080" aria-pressed="false">1080p</button>
                        <button class="resolution-btn" data-res="2560x1440" aria-pressed="false">1440p</button>
                        <button class="resolution-btn active" data-res="3840x2160" aria-pressed="true">4K</button>
                        <button class="resolution-btn" data-res="7680x4320" aria-pressed="false">8K</button>
                        <button class="resolution-btn" data-res="custom" aria-pressed="false">Custom</button>
                    </div>
                    <div class="custom-resolution" id="custom-resolution-inputs">
                        <div class="input-with-label">
                            <label for="export-width">Width</label>
                            <input type="number" id="export-width" class="control-input narrow" value="3840" min="100" max="16384" step="1">
                        </div>
                        <span class="dimension-separator">Ã—</span>
                        <div class="input-with-label">
                            <label for="export-height">Height</label>
                            <input type="number" id="export-height" class="control-input narrow" value="2160" min="100" max="16384" step="1">
                        </div>
                        <button id="btn-swap-dimensions" class="btn btn-sm" title="Swap width and height">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/>
                            </svg>
                        </button>
                        <button id="btn-lock-aspect" class="btn btn-sm" title="Lock aspect ratio">
                            <svg class="icon icon-locked" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2"/>
                                <path d="M7 11V7a5 5 0 0110 0v4"/>
                            </svg>
                            <svg class="icon icon-unlocked hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2"/>
                                <path d="M7 11V7a5 5 0 019.9-1"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Aspect Ratio Presets -->
                <div class="control-group">
                    <label class="control-label">Aspect Ratio</label>
                    <div class="aspect-presets">
                        <button class="aspect-btn active" data-aspect="16:9">16:9</button>
                        <button class="aspect-btn" data-aspect="4:3">4:3</button>
                        <button class="aspect-btn" data-aspect="1:1">1:1</button>
                        <button class="aspect-btn" data-aspect="21:9">21:9</button>
                        <button class="aspect-btn" data-aspect="9:16">9:16</button>
                        <button class="aspect-btn" data-aspect="current">Current</button>
                    </div>
                </div>
                
                <!-- Supersampling -->
                <div class="control-group">
                    <label for="export-supersample" class="control-label">
                        <span>Supersampling (Anti-aliasing)</span>
                        <button class="info-btn" data-tooltip="Higher values produce smoother edges but take longer to render. 2Ã— is usually sufficient.">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                            </svg>
                        </button>
                    </label>
                    <select id="export-supersample" class="control-select">
                        <option value="1">1Ã— (No antialiasing) â€” Fastest</option>
                        <option value="2" selected>2Ã— (4 samples/pixel) â€” Recommended</option>
                        <option value="4">4Ã— (16 samples/pixel) â€” High Quality</option>
                        <option value="8">8Ã— (64 samples/pixel) â€” Ultra (Slow)</option>
                    </select>
                </div>
                
                <!-- Format -->
                <div class="control-group">
                    <label for="export-format" class="control-label">Format</label>
                    <select id="export-format" class="control-select">
                        <option value="png" selected>PNG â€” Lossless, large file</option>
                        <option value="jpg">JPEG â€” Lossy, smaller file</option>
                        <option value="webp">WebP â€” Modern, good quality/size</option>
                    </select>
                </div>
                
                <!-- JPEG Quality (shown when JPEG selected) -->
                <div class="control-group" id="jpeg-quality-group" hidden>
                    <label for="export-quality" class="control-label">
                        <span>JPEG Quality</span>
                        <span class="label-value" id="export-quality-display">95%</span>
                    </label>
                    <input type="range" id="export-quality" class="control-range" min="50" max="100" value="95">
                </div>
                
                <!-- Include Options -->
                <div class="control-group">
                    <label class="control-label">Include</label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="export-include-watermark">
                        <span class="checkbox-custom"></span>
                        <span>Watermark (coordinates)</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="export-include-metadata" checked>
                        <span class="checkbox-custom"></span>
                        <span>Embed metadata (EXIF)</span>
                    </label>
                </div>
                
                <!-- Estimates -->
                <div class="export-estimates">
                    <div class="estimate-row">
                        <span class="estimate-label">Estimated file size:</span>
                        <span class="estimate-value" id="export-size-estimate">~15 MB</span>
                    </div>
                    <div class="estimate-row">
                        <span class="estimate-label">Estimated render time:</span>
                        <span class="estimate-value" id="export-time-estimate">~30 seconds</span>
                    </div>
                    <div class="estimate-row">
                        <span class="estimate-label">Total pixels:</span>
                        <span class="estimate-value" id="export-pixels">8,294,400</span>
                    </div>
                </div>
                
                <!-- Progress (shown during export) -->
                <div class="export-progress-container" id="export-progress-container" hidden>
                    <div class="progress-status">
                        <span id="export-progress-status">Preparing...</span>
                        <button id="btn-cancel-export" class="btn btn-sm btn-danger">Cancel</button>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="export-progress-fill"></div>
                    </div>
                    <div class="progress-info">
                        <span id="export-progress-percent">0%</span>
                        <span id="export-progress-time">Elapsed: 0s</span>
                    </div>
                </div>
            </div>
            
            <footer class="modal-footer">
                <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button class="btn btn-primary" id="btn-start-export">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    Export Image
                </button>
            </footer>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SHARE MODAL
         URL sharing options
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-share" 
        class="modal" 
        role="dialog" 
        aria-modal="true" 
        aria-labelledby="share-title"
        hidden
    >
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-content modal-sm">
            <header class="modal-header">
                <h2 id="share-title" class="modal-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"/>
                        <circle cx="6" cy="12" r="3"/>
                        <circle cx="18" cy="19" r="3"/>
                        <path d="M8.59 13.51l6.83 3.98M15.41 6.51l-6.82 3.98"/>
                    </svg>
                    Share Location
                </h2>
                <button class="modal-close" data-dismiss="modal" aria-label="Close share dialog">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <p class="share-description">Share this exact fractal location with others:</p>
                
                <!-- Share URL -->
                <div class="share-url-container">
                    <input 
                        type="text" 
                        id="share-url" 
                        class="control-input mono" 
                        readonly 
                        aria-label="Share URL"
                        value="https://abyss-explorer.github.io/#..."
                    >
                    <button id="btn-copy-url" class="btn btn-primary" aria-label="Copy URL to clipboard">
                        <svg class="icon icon-copy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2"/>
                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                        </svg>
                        <svg class="icon icon-check hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        <span class="btn-text">Copy</span>
                    </button>
                </div>
                
                <div class="share-copied" id="share-copied" hidden>
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                    Copied to clipboard!
                </div>
                
                <!-- Include Options -->
                <div class="control-group">
                    <label class="control-label">Include in URL</label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="share-include-palette" checked>
                        <span class="checkbox-custom"></span>
                        <span>Color palette</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="share-include-coloring" checked>
                        <span class="checkbox-custom"></span>
                        <span>Coloring algorithm & settings</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="share-include-iterations" checked>
                        <span class="checkbox-custom"></span>
                        <span>Iteration count</span>
                    </label>
                </div>
                
                <!-- QR Code -->
                <div class="qr-code-container" id="qr-code-container">
                    <canvas id="qr-code-canvas" width="150" height="150"></canvas>
                    <span class="qr-hint">Scan to open on mobile</span>
                </div>
                
                <!-- Social Share -->
                <div class="social-share">
                    <span class="social-label">Share on:</span>
                    <div class="social-buttons">
                        <button class="social-btn" data-platform="twitter" aria-label="Share on Twitter">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </button>
                        <button class="social-btn" data-platform="facebook" aria-label="Share on Facebook">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </button>
                        <button class="social-btn" data-platform="reddit" aria-label="Share on Reddit">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </button>
                        <button class="social-btn" data-platform="email" aria-label="Share via email">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         HELP MODAL
         Keyboard shortcuts and navigation guide
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-help" 
        class="modal" 
        role="dialog" 
        aria-modal="true" 
        aria-labelledby="help-title"
        hidden
    >
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-content modal-lg">
            <header class="modal-header">
                <h2 id="help-title" class="modal-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    Help & Documentation
                </h2>
                <button class="modal-close" data-dismiss="modal" aria-label="Close help">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Help Tabs -->
                <div class="help-tabs" role="tablist">
                    <button class="help-tab active" role="tab" aria-selected="true" data-tab="shortcuts">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="4" width="20" height="16" rx="2"/>
                            <path d="M6 8h.001M10 8h.001M14 8h.001M18 8h.001M8 12h.001M12 12h.001M16 12h.001M6 16h12"/>
                        </svg>
                        Keyboard Shortcuts
                    </button>
                    <button class="help-tab" role="tab" aria-selected="false" data-tab="navigation">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/>
                        </svg>
                        Navigation
                    </button>
                    <button class="help-tab" role="tab" aria-selected="false" data-tab="fractals">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <circle cx="12" cy="12" r="4"/>
                            <circle cx="12" cy="12" r="1"/>
                        </svg>
                        Fractals
                    </button>
                    <button class="help-tab" role="tab" aria-selected="false" data-tab="about">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="16" x2="12" y2="12"/>
                            <line x1="12" y1="8" x2="12.01" y2="8"/>
                        </svg>
                        About
                    </button>
                </div>
                
                <!-- Shortcuts Tab -->
                <div id="help-shortcuts" class="help-content active" role="tabpanel">
                    <div class="shortcuts-grid">
                        <div class="shortcut-group">
                            <h3>Navigation</h3>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Scroll</kbd> / <kbd>+</kbd><kbd>-</kbd></span>
                                <span class="shortcut-desc">Zoom in/out</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Click + Drag</kbd></span>
                                <span class="shortcut-desc">Pan view</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Double Click</kbd></span>
                                <span class="shortcut-desc">Zoom to point</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Arrow Keys</kbd></span>
                                <span class="shortcut-desc">Pan view</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Shift</kbd> + <kbd>Arrows</kbd></span>
                                <span class="shortcut-desc">Pan faster</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>H</kbd></span>
                                <span class="shortcut-desc">Home / Reset view</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Backspace</kbd></span>
                                <span class="shortcut-desc">Go back</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Actions</h3>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Z</kbd></span>
                                <span class="shortcut-desc">Undo</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Y</kbd></span>
                                <span class="shortcut-desc">Redo</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>S</kbd></span>
                                <span class="shortcut-desc">Quick save</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>S</kbd></span>
                                <span class="shortcut-desc">Share location</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>E</kbd></span>
                                <span class="shortcut-desc">Export image</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>P</kbd></span>
                                <span class="shortcut-desc">Quick screenshot</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>B</kbd></span>
                                <span class="shortcut-desc">Bookmark location</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>R</kbd></span>
                                <span class="shortcut-desc">Random location</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Display</h3>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Tab</kbd></span>
                                <span class="shortcut-desc">Toggle sidebar</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>F</kbd></span>
                                <span class="shortcut-desc">Fullscreen</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>C</kbd></span>
                                <span class="shortcut-desc">Toggle coordinates</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>M</kbd></span>
                                <span class="shortcut-desc">Toggle minimap</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>T</kbd></span>
                                <span class="shortcut-desc">Toggle theme</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>I</kbd></span>
                                <span class="shortcut-desc">Math info panel</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Mode & Fractal</h3>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>2</kbd></span>
                                <span class="shortcut-desc">Switch to 2D mode</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>3</kbd></span>
                                <span class="shortcut-desc">Switch to 3D mode</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>J</kbd></span>
                                <span class="shortcut-desc">Toggle Julia mode</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Space</kbd></span>
                                <span class="shortcut-desc">Palette animation</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>[</kbd> <kbd>]</kbd></span>
                                <span class="shortcut-desc">Cycle palettes</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>,</kbd> <kbd>.</kbd></span>
                                <span class="shortcut-desc">Adjust iterations</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Dialogs</h3>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>?</kbd></span>
                                <span class="shortcut-desc">Open help</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>Esc</kbd></span>
                                <span class="shortcut-desc">Close dialog/Cancel</span>
                            </div>
                            <div class="shortcut-row">
                                <span class="shortcut-keys"><kbd>G</kbd></span>
                                <span class="shortcut-desc">Open gallery</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation Tab -->
                <div id="help-navigation" class="help-content" role="tabpanel" hidden>
                    <h3>2D Navigation</h3>
                    <p>Use your mouse wheel to zoom in and out. Click and drag to pan around the fractal. Double-click on any point to center and zoom to that location.</p>
                    <p>For precise navigation, enter exact coordinates in the Camera section of the sidebar. You can copy and paste coordinates to share specific locations.</p>
                    
                    <h3>Deep Zoom</h3>
                    <p>When zooming beyond 10^15 magnification, the application automatically switches to perturbation theory for accurate calculations. Series approximation skips billions of initial iterations, making deep exploration practical.</p>
                    <p>At extreme depths (10^300+), you may notice occasional "glitches" - visual artifacts that are automatically detected and corrected.</p>
                    
                    <h3>3D Navigation</h3>
                    <p><strong>Orbit Mode:</strong> Click and drag to orbit around the fractal. Scroll to zoom in/out.</p>
                    <p><strong>Fly Mode:</strong> Use WASD keys to move, mouse to look around.</p>
                    <p><strong>First Person:</strong> Navigate inside the fractal structure with FPS-style controls.</p>
                    
                    <h3>Touch Controls</h3>
                    <p>On touch devices, use pinch-to-zoom and two-finger panning. Double-tap to zoom in on a specific point.</p>
                </div>
                
                <!-- Fractals Tab -->
                <div id="help-fractals" class="help-content" role="tabpanel" hidden>
                    <h3>Mandelbrot Set</h3>
                    <p>The iconic fractal, discovered by BenoÃ®t Mandelbrot in 1980. Points are colored based on how quickly the iteration z â†’ zÂ² + c escapes to infinity.</p>
                    
                    <h3>Julia Sets</h3>
                    <p>Related to the Mandelbrot set, but using a fixed constant c. Each point in the Mandelbrot set corresponds to a unique Julia set. Use "Pick from Mandelbrot" to explore this connection.</p>
                    
                    <h3>Burning Ship</h3>
                    <p>A variant using absolute values: z â†’ |Re(z)| + i|Im(z)|)Â² + c. Creates dramatic asymmetric structures resembling flaming ships.</p>
                    
                    <h3>Newton Fractals</h3>
                    <p>Visualizations of Newton's method for finding roots of complex polynomials. Colors show which root each starting point converges to.</p>
                    
                    <h3>3D Fractals</h3>
                    <p><strong>Mandelbulb:</strong> A 3D analog of the Mandelbrot set using spherical coordinates. The power parameter controls the shape's complexity.</p>
                    <p><strong>Mandelbox:</strong> An infinitely complex box folding fractal. The scale parameter dramatically changes its appearance.</p>
                    <p><strong>Menger Sponge:</strong> A cube with infinite detail created through iterated hole-punching.</p>
                </div>
                
                <!-- About Tab -->
                <div id="help-about" class="help-content" role="tabpanel" hidden>
                    <div class="about-header">
                        <svg class="about-logo" viewBox="0 0 48 48" fill="none">
                            <circle cx="24" cy="24" r="22" stroke="currentColor" stroke-width="2" opacity="0.5"/>
                            <circle cx="24" cy="24" r="14" stroke="currentColor" stroke-width="2" opacity="0.7"/>
                            <circle cx="24" cy="24" r="6" stroke="currentColor" stroke-width="2"/>
                            <circle cx="24" cy="24" r="2" fill="currentColor"/>
                        </svg>
                        <div>
                            <h3>Abyss Explorer</h3>
                            <p class="version">Version 1.0.0</p>
                        </div>
                    </div>
                    
                    <p class="about-tagline">Explore infinite mathematical beauty</p>
                    
                    <p>Abyss Explorer is a free, open-source fractal exploration tool that runs entirely in your browser. Using advanced techniques like perturbation theory and series approximation, it can zoom to depths of 10^-1000 and beyond.</p>
                    
                    <h4>Technical Features</h4>
                    <ul>
                        <li>Perturbation theory for ultra-deep zooms (K.I. Martin)</li>
                        <li>Series approximation for iteration skipping (C. Heiland-Allen)</li>
                        <li>50+ coloring algorithms</li>
                        <li>3D raymarching with custom GLSL shaders</li>
                        <li>Web Workers for parallel computation</li>
                        <li>WebGL acceleration</li>
                    </ul>
                    
                    <h4>Credits & Inspirations</h4>
                    <ul>
                        <li>Mandelbrot Set - BenoÃ®t Mandelbrot (1980)</li>
                        <li>Julia Sets - Gaston Julia (1918)</li>
                        <li>Mandelbulb - Daniel White & Paul Nylander (2009)</li>
                        <li>Mandelbox - Tom Lowe (2010)</li>
                        <li>SuperFractalThing, Kalles Fraktaler, Fractal eXtreme</li>
                    </ul>
                    
                    <h4>License</h4>
                    <p>MIT License - Free for personal and commercial use</p>
                    
                    <div class="about-links">
                        <a href="https://github.com/abyss-explorer/abyss-explorer" target="_blank" rel="noopener" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                            </svg>
                            View on GitHub
                        </a>
                        <a href="https://abyss-explorer.github.io/docs" target="_blank" rel="noopener" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
                                <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                            </svg>
                            Documentation
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PALETTE EDITOR MODAL
         Custom palette creation and editing
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-palette" 
        class="modal" 
        role="dialog" 
        aria-modal="true" 
        aria-labelledby="palette-editor-title"
        hidden
    >
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-content modal-lg">
            <header class="modal-header">
                <h2 id="palette-editor-title" class="modal-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2.69l5.66 5.66a8 8 0 11-11.31 0z"/>
                    </svg>
                    Palette Editor
                </h2>
                <button class="modal-close" data-dismiss="modal" aria-label="Close palette editor">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Gradient Editor -->
                <div class="gradient-editor">
                    <div class="gradient-canvas-container">
                        <canvas id="gradient-canvas" class="gradient-canvas" width="600" height="40"></canvas>
                        <div id="color-stops" class="color-stops">
                            <!-- Color stop markers will be added dynamically -->
                        </div>
                    </div>
                    <p class="gradient-hint">Click on the gradient to add color stops. Drag stops to reposition. Double-click to edit color.</p>
                </div>
                
                <!-- Selected Stop Editor -->
                <div class="stop-editor" id="stop-editor">
                    <h3>Selected Color Stop</h3>
                    <div class="stop-controls">
                        <div class="control-group">
                            <label for="stop-color" class="control-label">Color</label>
                            <div class="color-input-group">
                                <input type="color" id="stop-color" class="control-color" value="#6366f1">
                                <input type="text" id="stop-color-hex" class="control-input mono narrow" value="#6366f1" maxlength="7">
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label for="stop-position" class="control-label">
                                <span>Position</span>
                                <span class="label-value" id="stop-position-display">50%</span>
                            </label>
                            <input type="range" id="stop-position" class="control-range" min="0" max="1" step="0.001" value="0.5">
                        </div>
                        
                        <div class="color-components">
                            <div class="input-with-label">
                                <label>R</label>
                                <input type="number" id="stop-r" class="control-input narrow" value="99" min="0" max="255">
                            </div>
                            <div class="input-with-label">
                                <label>G</label>
                                <input type="number" id="stop-g" class="control-input narrow" value="102" min="0" max="255">
                            </div>
                            <div class="input-with-label">
                                <label>B</label>
                                <input type="number" id="stop-b" class="control-input narrow" value="241" min="0" max="255">
                            </div>
                        </div>
                        
                        <button id="btn-delete-stop" class="btn btn-danger btn-sm">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"/>
                                <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                            Delete Stop
                        </button>
                    </div>
                </div>
                
                <!-- Palette Actions -->
                <div class="palette-actions">
                    <div class="action-group">
                        <button id="btn-add-stop" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 8v8M8 12h8"/>
                            </svg>
                            Add Stop
                        </button>
                        <button id="btn-equalize-stops" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 6H3M21 12H3M21 18H3"/>
                            </svg>
                            Equalize
                        </button>
                        <button id="btn-reverse-gradient" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/>
                            </svg>
                            Reverse
                        </button>
                    </div>
                    
                    <div class="action-group">
                        <button id="btn-import-palette-file" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            Import
                        </button>
                        <button id="btn-export-palette-file" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                            Export
                        </button>
                    </div>
                </div>
                
                <!-- Interpolation Mode -->
                <div class="control-group">
                    <label for="palette-edit-interpolation" class="control-label">
                        <span>Color Interpolation</span>
                        <button class="info-btn" data-tooltip="How colors blend between stops. OKLAB produces the most perceptually uniform gradients.">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                            </svg>
                        </button>
                    </label>
                    <select id="palette-edit-interpolation" class="control-select">
                        <option value="rgb">RGB â€” Simple linear blending</option>
                        <option value="hsl" selected>HSL â€” Hue-preserving</option>
                        <option value="hsv">HSV â€” Value-preserving</option>
                        <option value="lab">LAB â€” Perceptually uniform</option>
                        <option value="oklab">OKLAB â€” Modern perceptual (Recommended)</option>
                        <option value="oklch">OKLCH â€” Perceptual + constant hue</option>
                    </select>
                </div>
                
                <!-- Palette Presets for Quick Start -->
                <div class="control-group">
                    <label class="control-label">Quick Start from Preset</label>
                    <div class="quick-palette-presets">
                        <button class="quick-palette-btn" data-palette="grayscale" title="Grayscale">
                            <span style="background:linear-gradient(to right, #000, #fff)"></span>
                        </button>
                        <button class="quick-palette-btn" data-palette="fire" title="Fire">
                            <span style="background:linear-gradient(to right, #000, #f00, #ff0, #fff)"></span>
                        </button>
                        <button class="quick-palette-btn" data-palette="ice" title="Ice">
                            <span style="background:linear-gradient(to right, #000, #00f, #0ff, #fff)"></span>
                        </button>
                        <button class="quick-palette-btn" data-palette="rainbow" title="Rainbow">
                            <span style="background:linear-gradient(to right, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00)"></span>
                        </button>
                        <button class="quick-palette-btn" data-palette="viridis" title="Viridis">
                            <span style="background:linear-gradient(to right, #440154, #31688e, #35b779, #fde725)"></span>
                        </button>
                    </div>
                </div>
                
                <!-- Save Palette Name -->
                <div class="control-group">
                    <label for="palette-save-name" class="control-label">Palette Name</label>
                    <input type="text" id="palette-save-name" class="control-input" placeholder="My Custom Palette" value="">
                </div>
            </div>
            
            <footer class="modal-footer">
                <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button class="btn btn-secondary" id="btn-save-palette-custom">Save as New</button>
                <button class="btn btn-primary" id="btn-apply-palette-edits">Apply</button>
            </footer>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         FULL GALLERY MODAL
         Fullscreen gallery browser
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-gallery" 
        class="modal modal-fullscreen" 
        role="dialog" 
        aria-modal="true" 
        aria-labelledby="gallery-modal-title"
        hidden
    >
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="gallery-modal-title" class="modal-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    Gallery
                    <span class="modal-subtitle" id="gallery-modal-count">1000+ locations</span>
                </h2>
                
                <!-- Search in header -->
                <div class="gallery-modal-search">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input 
                        type="text" 
                        id="gallery-modal-search" 
                        class="control-input" 
                        placeholder="Search locations..."
                        aria-label="Search gallery"
                    >
                </div>
                
                <button class="modal-close" data-dismiss="modal" aria-label="Close gallery">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Filters -->
                <div class="gallery-modal-filters">
                    <div class="filter-section">
                        <span class="filter-label">Type:</span>
                        <div class="filter-chips">
                            <button class="filter-chip active" data-filter="all">All</button>
                            <button class="filter-chip" data-filter="mandelbrot">Mandelbrot</button>
                            <button class="filter-chip" data-filter="julia">Julia</button>
                            <button class="filter-chip" data-filter="burning-ship">Burning Ship</button>
                            <button class="filter-chip" data-filter="tricorn">Tricorn</button>
                            <button class="filter-chip" data-filter="newton">Newton</button>
                            <button class="filter-chip" data-filter="3d">3D</button>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <span class="filter-label">Zoom Depth:</span>
                        <div class="filter-chips">
                            <button class="filter-chip" data-filter="shallow">Shallow (&lt;10^10)</button>
                            <button class="filter-chip" data-filter="medium">Medium (10^10-100)</button>
                            <button class="filter-chip" data-filter="deep">Deep (10^100-500)</button>
                            <button class="filter-chip" data-filter="ultra-deep">Ultra (10^500+)</button>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <span class="filter-label">Category:</span>
                        <div class="filter-chips">
                            <button class="filter-chip" data-filter="famous">Famous Locations</button>
                            <button class="filter-chip" data-filter="spirals">Spirals</button>
                            <button class="filter-chip" data-filter="minibrots">Mini Mandelbrots</button>
                            <button class="filter-chip" data-filter="seahorse">Seahorse Valley</button>
                            <button class="filter-chip" data-filter="elephant">Elephant Valley</button>
                            <button class="filter-chip" data-filter="artistic">Artistic</button>
                            <button class="filter-chip" data-filter="bookmarks">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                                </svg>
                                My Bookmarks
                            </button>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <span class="filter-label">Sort:</span>
                        <select id="gallery-modal-sort" class="control-select compact">
                            <option value="name">Name (A-Z)</option>
                            <option value="zoom-desc" selected>Zoom (Deep â†’ Shallow)</option>
                            <option value="zoom-asc">Zoom (Shallow â†’ Deep)</option>
                            <option value="recent">Recently Added</option>
                            <option value="popular">Most Viewed</option>
                        </select>
                    </div>
                </div>
                
                <!-- Gallery Grid -->
                <div class="gallery-modal-grid" id="gallery-modal-grid" role="listbox" aria-label="Fractal location gallery">
                    <!-- Gallery items populated dynamically -->
                    <div class="gallery-loading">
                        <div class="loading-spinner"></div>
                        <span>Loading gallery...</span>
                    </div>
                </div>
                
                <!-- Load More -->
                <div class="gallery-modal-load-more" id="gallery-load-more">
                    <button id="btn-load-more" class="btn btn-secondary">
                        Load More Locations
                    </button>
                </div>
            </div>
        </div>
    </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: Custom Formula (Collapsed by default)
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <section class="sidebar-section" aria-labelledby="section-formula-title">
                    <h2 id="section-formula-title" class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M4 7h6M4 17h10M9 4v16"/>
                            <path d="M15 7h5M15 12h5M15 17h5"/>
                        </svg>
                        <span>Custom Formula</span>
                        <span class="badge beta">Î²</span>
                        <button class="collapse-btn" aria-expanded="false" aria-controls="formula-content">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 15l-6-6-6 6"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="formula-content" class="section-content collapsed">
                        
                        <!-- Formula Input -->
                        <div class="control-group">
                            <label for="custom-formula" class="control-label">
                                <span>Iteration Formula</span>
                                <button 
                                    class="info-btn"
                                    data-tooltip="Enter the iteration formula using z (current value), c (pixel coordinate), and standard math operators. Supports: +, -, *, /, ^, sin, cos, tan, exp, log, abs, real, imag, conj, arg, norm"
                                >
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                                </button>
                            </label>
                            <div class="formula-editor">
                                <textarea 
                                    id="custom-formula" 
                                    class="control-textarea mono" 
                                    rows="3"
                                    spellcheck="false"
                                    placeholder="z^2 + c"
                                    aria-label="Custom iteration formula"
                                    aria-describedby="formula-syntax"
                                >z^2 + c</textarea>
                                <div class="formula-toolbar">
                                    <button class="formula-btn" data-insert="z" title="Current z value">z</button>
                                    <button class="formula-btn" data-insert="c" title="Pixel coordinate c">c</button>
                                    <button class="formula-btn" data-insert="^2" title="Square">Â²</button>
                                    <button class="formula-btn" data-insert="^3" title="Cube">Â³</button>
                                    <button class="formula-btn" data-insert="conj(z)" title="Complex conjugate">zÌ„</button>
                                    <button class="formula-btn" data-insert="abs(z)" title="Absolute value">|z|</button>
                                    <button class="formula-btn" data-insert="sin(z)" title="Sine">sin</button>
                                    <button class="formula-btn" data-insert="cos(z)" title="Cosine">cos</button>
                                    <button class="formula-btn" data-insert="exp(z)" title="Exponential">exp</button>
                                    <button class="formula-btn" data-insert="log(z)" title="Natural log">log</button>
                                </div>
                            </div>
                            <p id="formula-syntax" class="control-hint">
                                Variables: <code>z</code> (current), <code>c</code> (pixel), <code>z_prev</code> (previous z), <code>n</code> (iteration)
                            </p>
                        </div>
                        
                        <!-- Formula Presets -->
                        <div class="control-group">
                            <label for="formula-preset" class="control-label">Preset Formulas</label>
                            <select id="formula-preset" class="control-select">
                                <option value="">Select a preset...</option>
                                <optgroup label="Power Variations">
                                    <option value="z^2+c">zÂ² + c (Standard)</option>
                                    <option value="z^3+c">zÂ³ + c</option>
                                    <option value="z^4+c">zâ´ + c</option>
                                    <option value="z^5+c">zâµ + c</option>
                                    <option value="z^6+c">zâ¶ + c</option>
                                    <option value="z^2+z+c">zÂ² + z + c</option>
                                    <option value="z^3+z^2+c">zÂ³ + zÂ² + c</option>
                                </optgroup>
                                <optgroup label="Classic Modifications">
                                    <option value="abs(real(z))+i*abs(imag(z))">Burning Ship: |Re| + i|Im|</option>
                                    <option value="conj(z)^2+c">Tricorn: conj(z)Â² + c</option>
                                    <option value="abs(real(z^2))+i*imag(z^2)+c">Celtic: |Re(zÂ²)| + c</option>
                                    <option value="z^2+c+p*z_prev">Phoenix: zÂ² + c + pÂ·z_prev</option>
                                </optgroup>
                                <optgroup label="Transcendental">
                                    <option value="sin(z)*c">sin(z) Â· c</option>
                                    <option value="cos(z)+c">cos(z) + c</option>
                                    <option value="z*sin(z)+c">zÂ·sin(z) + c</option>
                                    <option value="exp(z^2)+c">exp(zÂ²) + c</option>
                                    <option value="z^2+sin(z)+c">zÂ² + sin(z) + c</option>
                                    <option value="sinh(z)+c">sinh(z) + c</option>
                                    <option value="cosh(z)*c">cosh(z) Â· c</option>
                                </optgroup>
                                <optgroup label="Rational">
                                    <option value="z^2/(z+1)+c">zÂ²/(z+1) + c</option>
                                    <option value="z-z^3/3+c">z - zÂ³/3 + c</option>
                                    <option value="(z^2+c)/(z^2-c)">(zÂ²+c)/(zÂ²-c)</option>
                                </optgroup>
                                <optgroup label="Experimental">
                                    <option value="z^2+c/z">zÂ² + c/z</option>
                                    <option value="z^2*c+z">zÂ²Â·c + z</option>
                                    <option value="z^2+c+1/c">zÂ² + c + 1/c</option>
                                    <option value="abs(z)^2+c">|z|Â² + c</option>
                                    <option value="z^2+abs(c)">zÂ² + |c|</option>
                                    <option value="z^z+c">z^z + c</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <!-- Initial Z -->
                        <div class="control-group">
                            <label class="control-label">Initial zâ‚€</label>
                            <div class="dual-input">
                                <div class="input-with-label">
                                    <label for="z0-real">Re</label>
                                    <input type="number" id="z0-real" class="control-input mono" value="0" step="0.1">
                                </div>
                                <div class="input-with-label">
                                    <label for="z0-imag">Im</label>
                                    <input type="number" id="z0-imag" class="control-input mono" value="0" step="0.1">
                                </div>
                            </div>
                            <div class="z0-presets">
                                <button class="preset-btn active" data-z0="0,0">0</button>
                                <button class="preset-btn" data-z0="c">c</button>
                                <button class="preset-btn" data-z0="1,0">1</button>
                                <button class="preset-btn" data-z0="0,1">i</button>
                            </div>
                        </div>
                        
                        <!-- Escape Condition -->
                        <div class="control-group">
                            <label for="escape-condition" class="control-label">Escape Condition</label>
                            <select id="escape-condition" class="control-select">
                                <option value="norm" selected>|z| > bailout (Standard)</option>
                                <option value="norm-squared">|z|Â² > bailout</option>
                                <option value="real">|Re(z)| > bailout</option>
                                <option value="imag">|Im(z)| > bailout</option>
                                <option value="real-or-imag">|Re| or |Im| > bailout</option>
                                <option value="manhattan">|Re| + |Im| > bailout</option>
                            </select>
                        </div>
                        
                        <!-- Validation Status -->
                        <div class="formula-status" id="formula-status">
                            <span class="status-icon status-valid">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 6L9 17l-5-5"/>
                                </svg>
                            </span>
                            <span class="status-icon status-invalid hidden">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M15 9l-6 6M9 9l6 6"/>
                                </svg>
                            </span>
                            <span class="status-text" id="formula-status-text">Formula is valid</span>
                        </div>
                        
                        <!-- Apply Button -->
                        <button id="btn-apply-formula" class="btn btn-primary btn-block">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                            <span>Apply Formula</span>
                        </button>
                        
                        <!-- Save Custom Formula -->
                        <div class="btn-row">
                            <button id="btn-save-formula" class="btn btn-secondary btn-sm">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                                    <polyline points="17 21 17 13 7 13 7 21"/>
                                    <polyline points="7 3 7 8 15 8"/>
                                </svg>
                                Save
                            </button>
                            <button id="btn-load-formula" class="btn btn-secondary btn-sm">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                                </svg>
                                Load
                            </button>
                            <button id="btn-share-formula" class="btn btn-secondary btn-sm">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="18" cy="5" r="3"/>
                                    <circle cx="6" cy="12" r="3"/>
                                    <circle cx="18" cy="19" r="3"/>
                                    <path d="M8.59 13.51l6.83 3.98M15.41 6.51l-6.82 3.98"/>
                                </svg>
                                Share
                            </button>
                        </div>
                        
                    </div>
                </section>

            </div><!-- /sidebar-content -->
            
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 SIDEBAR FOOTER
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <div class="sidebar-footer">
                <button 
                    id="btn-bookmarks" 
                    class="icon-btn" 
                    title="Bookmarks"
                    aria-label="Open bookmarks panel"
                >
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                    </svg>
                    <span class="btn-badge" id="bookmark-count" hidden>0</span>
                </button>
                
                <button 
                    id="btn-history" 
                    class="icon-btn" 
                    title="History"
                    aria-label="Open navigation history"
                >
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </button>
                
                <button 
                    id="btn-math-info" 
                    class="icon-btn" 
                    title="Mathematical Background"
                    aria-label="View mathematical information about current fractal"
                >
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
                        <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                    </svg>
                </button>
                
                <button 
                    id="btn-console" 
                    class="icon-btn" 
                    title="Developer Console"
                    aria-label="Open developer console"
                >
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="4 17 10 11 4 5"/>
                        <line x1="12" y1="19" x2="20" y2="19"/>
                    </svg>
                </button>
                
                <div class="sidebar-footer-spacer"></div>
                
                <button 
                    id="btn-theme-toggle" 
                    class="icon-btn" 
                    title="Toggle Theme"
                    aria-label="Toggle light/dark theme"
                    aria-pressed="true"
                >
                    <svg class="icon icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="icon icon-moon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                    </svg>
                </button>
            </div>
            
        </aside>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             FLOATING ZOOM CONTROLS
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="zoom-controls" class="zoom-controls" role="group" aria-label="Zoom controls">
            <button 
                id="btn-zoom-in" 
                class="zoom-btn" 
                aria-label="Zoom in" 
                title="Zoom In (+)"
            >
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                    <path d="M11 8v6M8 11h6"/>
                </svg>
            </button>
            <div class="zoom-level-indicator" id="zoom-level-indicator" title="Current zoom level">
                <span class="zoom-level-text">1Ã—</span>
            </div>
            <button 
                id="btn-zoom-out" 
                class="zoom-btn" 
                aria-label="Zoom out" 
                title="Zoom Out (-)"
            >
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                    <path d="M8 11h6"/>
                </svg>
            </button>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TOAST NOTIFICATION CONTAINER
             For non-blocking user feedback messages
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div 
            id="toast-container" 
            class="toast-container" 
            role="region" 
            aria-live="polite" 
            aria-label="Notifications"
        ></div>

    </div><!-- /app-container -->

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
         â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â•â•
         â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
         â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â•šâ•â•â•â•â–ˆâ–ˆâ•‘
         â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
         â•šâ•â•     â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•
         
         Modal Dialogs - Overlay interfaces for complex interactions
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SETTINGS MODAL
         Application preferences and performance settings
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-settings" 
        class="modal" 
        role="dialog" 
        aria-labelledby="settings-title" 
        aria-modal="true"
        hidden
    >
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-content modal-md">
            <header class="modal-header">
                <h2 id="settings-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/>
                    </svg>
                    Settings
                </h2>
                <button class="modal-close" data-close-modal aria-label="Close settings">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Settings Tabs -->
                <div class="settings-tabs" role="tablist">
                    <button class="settings-tab active" role="tab" aria-selected="true" data-tab="performance">Performance</button>
                    <button class="settings-tab" role="tab" aria-selected="false" data-tab="display">Display</button>
                    <button class="settings-tab" role="tab" aria-selected="false" data-tab="interaction">Interaction</button>
                    <button class="settings-tab" role="tab" aria-selected="false" data-tab="export">Export</button>
                    <button class="settings-tab" role="tab" aria-selected="false" data-tab="data">Data</button>
                </div>
                
                <!-- Performance Settings -->
                <div class="settings-panel active" id="settings-performance" role="tabpanel">
                    <div class="settings-section">
                        <h3>Rendering Engine</h3>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-webgl" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">WebGL Acceleration</span>
                                <span class="checkbox-desc">Use GPU for 2D rendering when possible</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-workers" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Web Workers</span>
                                <span class="checkbox-desc">Multi-threaded rendering for better performance</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-progressive" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Progressive Rendering</span>
                                <span class="checkbox-desc">Show low-resolution preview while rendering</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-adaptive-detail">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Adaptive Detail</span>
                                <span class="checkbox-desc">Reduce quality during navigation for smoother panning</span>
                            </span>
                        </label>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Threading</h3>
                        
                        <div class="setting-row">
                            <label for="setting-threads">Worker Threads</label>
                            <select id="setting-threads" class="control-select">
                                <option value="auto" selected>Auto (detect cores)</option>
                                <option value="1">1 thread</option>
                                <option value="2">2 threads</option>
                                <option value="4">4 threads</option>
                                <option value="8">8 threads</option>
                                <option value="12">12 threads</option>
                                <option value="16">16 threads</option>
                            </select>
                        </div>
                        
                        <div class="setting-row">
                            <label for="setting-tile-size">Tile Size</label>
                            <select id="setting-tile-size" class="control-select">
                                <option value="32">32Ã—32 (more responsive)</option>
                                <option value="64">64Ã—64</option>
                                <option value="128" selected>128Ã—128 (balanced)</option>
                                <option value="256">256Ã—256 (faster overall)</option>
                                <option value="512">512Ã—512</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Memory</h3>
                        
                        <div class="setting-row">
                            <label for="setting-cache-size">Tile Cache Size</label>
                            <select id="setting-cache-size" class="control-select">
                                <option value="50">50 MB (low memory)</option>
                                <option value="100" selected>100 MB</option>
                                <option value="250">250 MB</option>
                                <option value="500">500 MB (fast navigation)</option>
                            </select>
                        </div>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-cache-enabled" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Enable Tile Caching</span>
                                <span class="checkbox-desc">Cache rendered tiles for faster re-navigation</span>
                            </span>
                        </label>
                    </div>
                </div>
                
                <!-- Display Settings -->
                <div class="settings-panel" id="settings-display" role="tabpanel" hidden>
                    <div class="settings-section">
                        <h3>HUD Elements</h3>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-coords" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Coordinates Display</span>
                                <span class="checkbox-desc">Show position, zoom, and iteration info</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-minimap" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Minimap</span>
                                <span class="checkbox-desc">Show zoom context overview</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-perf">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Performance Stats</span>
                                <span class="checkbox-desc">Show FPS, render time, and precision info</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-histogram">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Iteration Histogram</span>
                                <span class="checkbox-desc">Show distribution of iteration counts</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-crosshair">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Center Crosshair</span>
                                <span class="checkbox-desc">Show crosshair at view center</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-mouse-coords" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Mouse Coordinates</span>
                                <span class="checkbox-desc">Show coordinates under cursor</span>
                            </span>
                        </label>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Coordinate Precision</h3>
                        
                        <div class="setting-row">
                            <label for="setting-coord-precision">Decimal Places</label>
                            <select id="setting-coord-precision" class="control-select">
                                <option value="6">6 digits</option>
                                <option value="10">10 digits</option>
                                <option value="15" selected>15 digits</option>
                                <option value="20">20 digits</option>
                                <option value="50">50 digits (deep zoom)</option>
                                <option value="full">Full precision</option>
                            </select>
                        </div>
                        
                        <div class="setting-row">
                            <label for="setting-coord-format">Coordinate Format</label>
                            <select id="setting-coord-format" class="control-select">
                                <option value="decimal" selected>Decimal</option>
                                <option value="scientific">Scientific Notation</option>
                                <option value="engineering">Engineering Notation</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Theme</h3>
                        
                        <div class="setting-row">
                            <label for="setting-theme">Color Theme</label>
                            <select id="setting-theme" class="control-select">
                                <option value="dark" selected>Dark</option>
                                <option value="light">Light</option>
                                <option value="system">System Default</option>
                                <option value="midnight">Midnight Blue</option>
                                <option value="forest">Forest Green</option>
                            </select>
                        </div>
                        
                        <div class="setting-row">
                            <label for="setting-ui-scale">UI Scale</label>
                            <select id="setting-ui-scale" class="control-select">
                                <option value="0.85">85%</option>
                                <option value="1" selected>100%</option>
                                <option value="1.1">110%</option>
                                <option value="1.25">125%</option>
                                <option value="1.5">150%</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Interaction Settings -->
                <div class="settings-panel" id="settings-interaction" role="tabpanel" hidden>
                    <div class="settings-section">
                        <h3>Zoom Behavior</h3>
                        
                        <div class="setting-row">
                            <label for="setting-zoom-speed">Zoom Speed</label>
                            <input type="range" id="setting-zoom-speed" class="control-range" min="0.5" max="3" value="1" step="0.1">
                            <span class="setting-value" id="setting-zoom-speed-value">1.0Ã—</span>
                        </div>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-smooth-zoom" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Smooth Zoom Animation</span>
                                <span class="checkbox-desc">Animate zoom transitions smoothly</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-zoom-to-cursor" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Zoom to Cursor</span>
                                <span class="checkbox-desc">Zoom centered on mouse position</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-invert-scroll">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Invert Scroll Direction</span>
                                <span class="checkbox-desc">Reverse zoom direction when scrolling</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-double-click-zoom" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Double-Click to Zoom</span>
                                <span class="checkbox-desc">Double-click to zoom to that location</span>
                            </span>
                        </label>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Pan Behavior</h3>
                        
                        <div class="setting-row">
                            <label for="setting-pan-speed">Pan Speed</label>
                            <input type="range" id="setting-pan-speed" class="control-range" min="0.5" max="3" value="1" step="0.1">
                            <span class="setting-value" id="setting-pan-speed-value">1.0Ã—</span>
                        </div>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-inertia" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Pan Inertia</span>
                                <span class="checkbox-desc">Continue movement after releasing mouse</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-keyboard-pan" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Arrow Key Navigation</span>
                                <span class="checkbox-desc">Use arrow keys to pan (Shift for faster)</span>
                            </span>
                        </label>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Selection</h3>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-box-zoom" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Box Zoom (Shift+Drag)</span>
                                <span class="checkbox-desc">Draw rectangle to zoom to selection</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-context-menu" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Right-Click Context Menu</span>
                                <span class="checkbox-desc">Show context menu on right-click</span>
                            </span>
                        </label>
                    </div>
                </div>
                
                <!-- Export Settings -->
                <div class="settings-panel" id="settings-export" role="tabpanel" hidden>
                    <div class="settings-section">
                        <h3>Default Export Settings</h3>
                        
                        <div class="setting-row">
                            <label for="setting-export-format">Image Format</label>
                            <select id="setting-export-format" class="control-select">
                                <option value="png" selected>PNG (Lossless)</option>
                                <option value="jpg">JPEG (Smaller)</option>
                                <option value="webp">WebP (Modern)</option>
                                <option value="tiff">TIFF (High Quality)</option>
                            </select>
                        </div>
                        
                        <div class="setting-row">
                            <label for="setting-export-quality">JPEG/WebP Quality</label>
                            <input type="range" id="setting-export-quality" class="control-range" min="0.5" max="1" value="0.92" step="0.01">
                            <span class="setting-value" id="setting-export-quality-value">92%</span>
                        </div>
                        
                        <div class="setting-row">
                            <label for="setting-export-resolution">Default Resolution</label>
                            <select id="setting-export-resolution" class="control-select">
                                <option value="1920x1080">1080p (1920Ã—1080)</option>
                                <option value="2560x1440">1440p (2560Ã—1440)</option>
                                <option value="3840x2160" selected>4K (3840Ã—2160)</option>
                                <option value="7680x4320">8K (7680Ã—4320)</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        
                        <div class="setting-row">
                            <label for="setting-export-supersample">Supersampling</label>
                            <select id="setting-export-supersample" class="control-select">
                                <option value="1">None (1Ã—)</option>
                                <option value="2" selected>2Ã— (recommended)</option>
                                <option value="4">4Ã— (high quality)</option>
                                <option value="8">8Ã— (ultra quality)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Metadata</h3>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-export-metadata" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Embed Coordinates</span>
                                <span class="checkbox-desc">Save fractal location in image metadata</span>
                            </span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-export-watermark">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Add Watermark</span>
                                <span class="checkbox-desc">Include "Abyss Explorer" watermark</span>
                            </span>
                        </label>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Animation Export</h3>
                        
                        <div class="setting-row">
                            <label for="setting-anim-format">Video Format</label>
                            <select id="setting-anim-format" class="control-select">
                                <option value="webm" selected>WebM (VP9)</option>
                                <option value="gif">GIF (Animated)</option>
                                <option value="frames">PNG Sequence</option>
                            </select>
                        </div>
                        
                        <div class="setting-row">
                            <label for="setting-anim-bitrate">Video Bitrate</label>
                            <select id="setting-anim-bitrate" class="control-select">
                                <option value="5000">5 Mbps</option>
                                <option value="10000" selected>10 Mbps</option>
                                <option value="20000">20 Mbps</option>
                                <option value="40000">40 Mbps</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Data Settings -->
                <div class="settings-panel" id="settings-data" role="tabpanel" hidden>
                    <div class="settings-section">
                        <h3>History</h3>
                        
                        <div class="setting-row">
                            <label for="setting-history-size">History Size</label>
                            <select id="setting-history-size" class="control-select">
                                <option value="50">50 entries</option>
                                <option value="100" selected>100 entries</option>
                                <option value="250">250 entries</option>
                                <option value="500">500 entries</option>
                                <option value="unlimited">Unlimited</option>
                            </select>
                        </div>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="setting-auto-save-history" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="checkbox-title">Auto-Save History</span>
                                <span class="checkbox-desc">Save navigation history to local storage</span>
                            </span>
                        </label>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Data Management</h3>
                        
                        <div class="data-actions">
                            <button id="btn-export-settings" class="btn btn-secondary">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Export All Settings
                            </button>
                            
                            <button id="btn-import-settings" class="btn btn-secondary">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                Import Settings
                            </button>
                        </div>
                        
                        <div class="data-actions danger-zone">
                            <h4>Danger Zone</h4>
                            
                            <button id="btn-clear-bookmarks" class="btn btn-outline-danger">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                                    <path d="M9 9l6 6M15 9l-6 6"/>
                                </svg>
                                Clear All Bookmarks
                            </button>
                            
                            <button id="btn-clear-history" class="btn btn-outline-danger">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                    <path d="M4 4l16 16"/>
                                </svg>
                                Clear All History
                            </button>
                            
                            <button id="btn-reset-settings" class="btn btn-danger">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                </svg>
                                Reset All to Defaults
                            </button>
                        </div>
                        
                        <div class="storage-info">
                            <h4>Storage Usage</h4>
                            <div class="storage-bar">
                                <div class="storage-fill" id="storage-fill" style="width: 12%"></div>
                            </div>
                            <div class="storage-stats">
                                <span>Bookmarks: <strong id="storage-bookmarks">0 KB</strong></span>
                                <span>History: <strong id="storage-history">0 KB</strong></span>
                                <span>Cache: <strong id="storage-cache">0 MB</strong></span>
                                <span>Total: <strong id="storage-total">0 MB</strong></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <footer class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>Cancel</button>
                <button class="btn btn-primary" id="btn-save-settings">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    Save Settings
                </button>
            </footer>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         EXPORT MODAL
         High-resolution image export settings
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-export" 
        class="modal" 
        role="dialog" 
        aria-labelledby="export-title" 
        aria-modal="true"
        hidden
    >
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-content modal-md">
            <header class="modal-header">
                <h2 id="export-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    Export Image
                </h2>
                <button class="modal-close" data-close-modal aria-label="Close export dialog">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Export Preview -->
                <div class="export-preview-container">
                    <canvas id="export-preview" class="export-preview" width="320" height="180"></canvas>
                    <div class="export-preview-overlay" id="export-preview-overlay">
                        <span>Preview will update</span>
                    </div>
                </div>
                
                <!-- Resolution Selection -->
                <div class="control-group">
                    <label class="control-label">Resolution</label>
                    <div class="resolution-presets">
                        <button class="resolution-btn" data-res="1280x720" data-name="720p">
                            <span class="res-name">720p</span>
                            <span class="res-dims">1280Ã—720</span>
                        </button>
                        <button class="resolution-btn" data-res="1920x1080" data-name="1080p">
                            <span class="res-name">1080p</span>
                            <span class="res-dims">1920Ã—1080</span>
                        </button>
                        <button class="resolution-btn" data-res="2560x1440" data-name="1440p">
                            <span class="res-name">1440p</span>
                            <span class="res-dims">2560Ã—1440</span>
                        </button>
                        <button class="resolution-btn active" data-res="3840x2160" data-name="4K">
                            <span class="res-name">4K</span>
                            <span class="res-dims">3840Ã—2160</span>
                        </button>
                        <button class="resolution-btn" data-res="7680x4320" data-name="8K">
                            <span class="res-name">8K</span>
                            <span class="res-dims">7680Ã—4320</span>
                        </button>
                        <button class="resolution-btn" data-res="custom" data-name="Custom">
                            <span class="res-name">Custom</span>
                            <span class="res-dims">...</span>
                        </button>
                    </div>
                </div>
                
                <!-- Custom Resolution -->
                <div class="control-group custom-resolution" id="custom-resolution-group" hidden>
                    <div class="dual-input">
                        <div class="input-with-label">
                            <label for="export-width">Width</label>
                            <input type="number" id="export-width" class="control-input" value="3840" min="100" max="32000" step="1">
                        </div>
                        <button id="link-dimensions" class="link-btn active" aria-label="Lock aspect ratio" title="Lock aspect ratio">
                            <svg class="icon icon-linked" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/>
                                <path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/>
                            </svg>
                            <svg class="icon icon-unlinked hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 7h2a5 5 0 014 8M9 17H7a5 5 0 01-4-8"/>
                                <path d="M8 12h8"/>
                            </svg>
                        </button>
                        <div class="input-with-label">
                            <label for="export-height">Height</label>
                            <input type="number" id="export-height" class="control-input" value="2160" min="100" max="32000" step="1">
                        </div>
                    </div>
                    <div class="resolution-info">
                        <span>Aspect Ratio: <strong id="aspect-ratio">16:9</strong></span>
                        <span>Megapixels: <strong id="megapixels">8.3 MP</strong></span>
                    </div>
                </div>
                
                <!-- Supersampling -->
                <div class="control-group">
                    <label for="export-supersample" class="control-label">
                        <span>Supersampling (Anti-aliasing)</span>
                        <button class="info-btn" data-tooltip="Renders at higher resolution then downscales for smoother edges. Higher values = better quality but longer render time.">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                            </svg>
                        </button>
                    </label>
                    <div class="supersample-options">
                        <button class="supersample-btn" data-ss="1">
                            <span class="ss-value">1Ã—</span>
                            <span class="ss-desc">None</span>
                        </button>
                        <button class="supersample-btn active" data-ss="2">
                            <span class="ss-value">2Ã—</span>
                            <span class="ss-desc">Good</span>
                        </button>
                        <button class="supersample-btn" data-ss="4">
                            <span class="ss-value">4Ã—</span>
                            <span class="ss-desc">High</span>
                        </button>
                        <button class="supersample-btn" data-ss="8">
                            <span class="ss-value">8Ã—</span>
                            <span class="ss-desc">Ultra</span>
                        </button>
                    </div>
                </div>
                
                <!-- Format -->
                <div class="control-group">
                    <label for="export-format" class="control-label">Format</label>
                    <div class="format-options">
                        <button class="format-btn active" data-format="png">
                            <span class="format-name">PNG</span>
                            <span class="format-desc">Lossless, best quality</span>
                        </button>
                        <button class="format-btn" data-format="jpg">
                            <span class="format-name">JPEG</span>
                            <span class="format-desc">Smaller file size</span>
                        </button>
                        <button class="format-btn" data-format="webp">
                            <span class="format-name">WebP</span>
                            <span class="format-desc">Modern, efficient</span>
                        </button>
                    </div>
                </div>
                
                <!-- JPEG/WebP Quality (shown when not PNG) -->
                <div class="control-group" id="quality-group" hidden>
                    <label for="export-quality" class="control-label">
                        <span>Quality</span>
                        <span class="label-value" id="export-quality-display">92%</span>
                    </label>
                    <input type="range" id="export-quality" class="control-range" min="50" max="100" value="92" step="1">
                </div>
                
                <!-- Metadata Options -->
                <div class="control-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="export-embed-coords" checked>
                        <span class="checkbox-custom"></span>
                        <span>Embed coordinates in metadata</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="export-include-params">
                        <span class="checkbox-custom"></span>
                        <span>Include all parameters (palette, coloring, etc.)</span>
                    </label>
                </div>
                
                <!-- Estimates -->
                <div class="export-estimates">
                    <div class="estimate-item">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="4" y="4" width="16" height="16" rx="2"/>
                            <path d="M4 9h16"/>
                        </svg>
                        <span class="estimate-label">Render Size:</span>
                        <strong id="render-size">7680 Ã— 4320</strong>
                    </div>
                    <div class="estimate-item">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                            <path d="M12 3v12"/>
                        </svg>
                        <span class="estimate-label">Est. File Size:</span>
                        <strong id="export-size">~15 MB</strong>
                    </div>
                    <div class="estimate-item">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <span class="estimate-label">Est. Time:</span>
                        <strong id="export-time">~30 seconds</strong>
                    </div>
                </div>
                
                <!-- Export Progress (hidden until export starts) -->
                <div class="export-progress" id="export-progress-container" hidden>
                    <div class="progress-header">
                        <span class="progress-status" id="export-status">Rendering...</span>
                        <span class="progress-percent" id="export-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="export-progress-fill"></div>
                    </div>
                    <div class="progress-details">
                        <span id="export-tiles">0 / 0 tiles</span>
                        <span id="export-elapsed">0:00 elapsed</span>
                        <span id="export-eta">~0:00 remaining</span>
                    </div>
                </div>
            </div>
            
            <footer class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>Cancel</button>
                <button class="btn btn-primary" id="btn-start-export">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <span class="btn-text">Export</span>
                </button>
            </footer>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SHARE MODAL
         URL sharing for current location
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-share" 
        class="modal" 
        role="dialog" 
        aria-labelledby="share-title" 
        aria-modal="true"
        hidden
    >
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-content modal-sm">
            <header class="modal-header">
                <h2 id="share-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"/>
                        <circle cx="6" cy="12" r="3"/>
                        <circle cx="18" cy="19" r="3"/>
                        <path d="M8.59 13.51l6.83 3.98M15.41 6.51l-6.82 3.98"/>
                    </svg>
                    Share Location
                </h2>
                <button class="modal-close" data-close-modal aria-label="Close share dialog">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <p class="share-description">Share this exact location with others:</p>
                
                <!-- Share URL -->
                <div class="share-url-container">
                    <input 
                        type="text" 
                        id="share-url" 
                        class="control-input mono share-url" 
                        readonly
                        aria-label="Share URL"
                    >
                    <button id="btn-copy-url" class="btn btn-primary copy-btn" aria-label="Copy URL to clipboard">
                        <svg class="icon icon-copy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2"/>
                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                        </svg>
                        <svg class="icon icon-check hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 6L9 17l-5-5"/>
                        </svg>
                        <span class="btn-text">Copy</span>
                    </button>
                </div>
                
                <!-- URL Options -->
                <div class="share-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="share-include-palette" checked>
                        <span class="checkbox-custom"></span>
                        <span>Include palette</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="share-include-coloring" checked>
                        <span class="checkbox-custom"></span>
                        <span>Include coloring settings</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="share-include-iterations">
                        <span class="checkbox-custom"></span>
                        <span>Include iteration count</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="share-short-url">
                        <span class="checkbox-custom"></span>
                        <span>Use short URL</span>
                    </label>
                </div>
                
                <!-- Share Preview -->
                <div class="share-preview">
                    <canvas id="share-preview-canvas" width="200" height="120"></canvas>
                </div>
                
                <!-- Social Share Buttons -->
                <div class="social-share">
                    <span class="social-share-label">Share on:</span>
                    <div class="social-buttons">
                        <button class="social-btn twitter" data-platform="twitter" title="Share on Twitter">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </button>
                        <button class="social-btn facebook" data-platform="facebook" title="Share on Facebook">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </button>
                        <button class="social-btn reddit" data-platform="reddit" title="Share on Reddit">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </button>
                        <button class="social-btn email" data-platform="email" title="Share via Email">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Copy Coordinates -->
                <div class="coord-copy-section">
                    <span class="coord-copy-label">Copy coordinates:</span>
                    <div class="coord-copy-buttons">
                        <button id="btn-copy-center" class="btn btn-sm btn-secondary">Center</button>
                        <button id="btn-copy-full" class="btn btn-sm btn-secondary">Full (Re, Im, Zoom)</button>
                        <button id="btn-copy-json" class="btn btn-sm btn-secondary">JSON</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         HELP MODAL
         Keyboard shortcuts and documentation
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-help" 
        class="modal" 
        role="dialog" 
        aria-labelledby="help-title" 
        aria-modal="true"
        hidden
    >
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-content modal-lg">
            <header class="modal-header">
                <h2 id="help-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    Help & Shortcuts
                </h2>
                <button class="modal-close" data-close-modal aria-label="Close help">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Help Tabs -->
                <div class="help-tabs" role="tablist">
                    <button class="help-tab active" role="tab" aria-selected="true" data-tab="shortcuts">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="4" width="20" height="16" rx="2"/>
                            <path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M8 12h8M6 16h.01M18 16h.01"/>
                        </svg>
                        Keyboard Shortcuts
                    </button>
                    <button class="help-tab" role="tab" aria-selected="false" data-tab="navigation">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M16 12l-4-4-4 4M12 16V9"/>
                        </svg>
                        Navigation
                    </button>
                    <button class="help-tab" role="tab" aria-selected="false" data-tab="techniques">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
                            <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                        </svg>
                        Techniques
                    </button>
                    <button class="help-tab" role="tab" aria-selected="false" data-tab="about">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        About
                    </button>
                </div>
                
                <!-- Shortcuts Tab -->
                <div class="help-content active" id="help-shortcuts" role="tabpanel">
                    <div class="shortcuts-grid">
                        <div class="shortcut-group">
                            <h3>Navigation</h3>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Scroll</kbd></div>
                                <span class="shortcut-desc">Zoom in/out</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>+</kbd> / <kbd>-</kbd></div>
                                <span class="shortcut-desc">Zoom in/out (keyboard)</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Drag</kbd></div>
                                <span class="shortcut-desc">Pan view</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Double Click</kbd></div>
                                <span class="shortcut-desc">Zoom to point</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>â†</kbd> <kbd>â†‘</kbd> <kbd>â†’</kbd> <kbd>â†“</kbd></div>
                                <span class="shortcut-desc">Pan (Shift = fast)</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Shift</kbd> + <kbd>Drag</kbd></div>
                                <span class="shortcut-desc">Box zoom (select area)</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>H</kbd></div>
                                <span class="shortcut-desc">Home (reset view)</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Backspace</kbd></div>
                                <span class="shortcut-desc">Go back</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Actions</h3>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Z</kbd></div>
                                <span class="shortcut-desc">Undo</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Y</kbd></div>
                                <span class="shortcut-desc">Redo</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>S</kbd></div>
                                <span class="shortcut-desc">Quick screenshot</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>S</kbd></div>
                                <span class="shortcut-desc">Share location</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>E</kbd></div>
                                <span class="shortcut-desc">Export image</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>B</kbd></div>
                                <span class="shortcut-desc">Add bookmark</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>C</kbd></div>
                                <span class="shortcut-desc">Copy coordinates</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Display</h3>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Tab</kbd></div>
                                <span class="shortcut-desc">Toggle sidebar</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>F</kbd></div>
                                <span class="shortcut-desc">Fullscreen</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>C</kbd></div>
                                <span class="shortcut-desc">Toggle coordinates</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>M</kbd></div>
                                <span class="shortcut-desc">Toggle minimap</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>I</kbd></div>
                                <span class="shortcut-desc">Toggle perf stats</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>G</kbd></div>
                                <span class="shortcut-desc">Open gallery</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>?</kbd></div>
                                <span class="shortcut-desc">Show this help</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Fractals & Rendering</h3>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>2</kbd></div>
                                <span class="shortcut-desc">2D mode</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>3</kbd></div>
                                <span class="shortcut-desc">3D mode</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>J</kbd></div>
                                <span class="shortcut-desc">Julia mode toggle</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>P</kbd></div>
                                <span class="shortcut-desc">Next palette</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Shift</kbd> + <kbd>P</kbd></div>
                                <span class="shortcut-desc">Previous palette</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Space</kbd></div>
                                <span class="shortcut-desc">Toggle palette cycling</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>R</kbd></div>
                                <span class="shortcut-desc">Re-render</span>
                            </div>
                            <div class="shortcut-row">
                                <div class="shortcut-keys"><kbd>Esc</kbd></div>
                                <span class="shortcut-desc">Cancel render / Close modal</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation Tab -->
                <div class="help-content" id="help-navigation" role="tabpanel" hidden>
                    <div class="help-section">
                        <h3>2D Navigation</h3>
                        <ul>
                            <li><strong>Mouse wheel</strong> or <strong>pinch gesture</strong> to zoom in/out, centered on cursor position</li>
                            <li><strong>Click and drag</strong> to pan around the fractal</li>
                            <li><strong>Double-click</strong> to zoom in and center on that point</li>
                            <li><strong>Shift + drag</strong> to draw a box and zoom to that region</li>
                            <li><strong>Right-click</strong> for context menu with additional options</li>
                            <li>Use the <strong>minimap</strong> to see your position and quickly navigate</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>3D Navigation</h3>
                        <ul>
                            <li><strong>Orbit mode:</strong> Click and drag to orbit around the fractal</li>
                            <li><strong>Fly mode:</strong> WASD keys to move, mouse to look around</li>
                            <li><strong>Scroll</strong> to move closer or farther from the fractal</li>
                            <li>Hold <strong>Shift</strong> for faster movement</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>Deep Zoom Tips</h3>
                        <ul>
                            <li>The application automatically switches to perturbation theory at deep zooms</li>
                            <li>At extreme depths (beyond 10^300), enable <strong>arbitrary precision</strong></li>
                            <li><strong>Auto-iterations</strong> increases detail as you zoom deeper</li>
                            <li>Use the <strong>Gallery</strong> to jump to interesting pre-computed locations</li>
                            <li>Watch for <strong>glitches</strong> (rendering artifacts) at very deep zooms - the app will auto-correct</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>Julia Set Exploration</h3>
                        <ul>
                            <li>Press <kbd>J</kbd> to toggle Julia mode</li>
                            <li>Click "Pick from Mandelbrot" to select a Julia seed from the Mandelbrot set</li>
                            <li>Each point in the Mandelbrot set corresponds to a unique Julia set</li>
                            <li>Points on the boundary of the Mandelbrot set produce the most interesting Julia sets</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Techniques Tab -->
                <div class="help-content" id="help-techniques" role="tabpanel" hidden>
                    <div class="help-section">
                        <h3>Perturbation Theory</h3>
                        <p>At deep zoom levels (beyond 10^14), standard floating-point arithmetic loses precision. Perturbation theory computes a single high-precision "reference orbit" and derives all other pixels as small perturbations from this reference. This allows zooming to depths of 10^1000 and beyond.</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>Series Approximation (SA)</h3>
                        <p>Series Approximation uses polynomial coefficients to skip millions of early iterations. The algorithm approximates the fractal formula with a Taylor series, dramatically speeding up deep zoom renders. SA Terms controls accuracy vs speed.</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>Glitch Correction</h3>
                        <p>At certain locations, the reference orbit may not accurately represent nearby pixels, causing visual glitches. The renderer detects these regions and automatically recalculates with a new reference point.</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>Distance Estimation</h3>
                        <p>Distance estimation computes the approximate distance from each point to the fractal boundary. This enables advanced coloring techniques, exterior/interior distinction, and smooth shading effects.</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>3D Raymarching</h3>
                        <p>3D fractals are rendered using raymarching with distance estimation. Rays are cast from the camera, marching forward in steps determined by the distance to the nearest surface. This technique allows rendering of infinitely complex 3D fractal geometry.</p>
                    </div>
                </div>
                
                <!-- About Tab -->
                <div class="help-content" id="help-about" role="tabpanel" hidden>
                    <div class="about-header">
                        <svg class="about-logo" viewBox="0 0 48 48" fill="none">
                            <circle cx="24" cy="24" r="22" stroke="currentColor" stroke-width="2" opacity="0.3"/>
                            <circle cx="24" cy="24" r="16" stroke="currentColor" stroke-width="2" opacity="0.5"/>
                            <circle cx="24" cy="24" r="10" stroke="currentColor" stroke-width="2" opacity="0.7"/>
                            <circle cx="24" cy="24" r="4" fill="currentColor"/>
                        </svg>
                        <div class="about-title">
                            <h3>Abyss Explorer</h3>
                            <span class="version">Version 1.0.0</span>
                        </div>
                    </div>
                    
                    <p class="about-description">
                        An open-source fractal explorer featuring infinite-depth zoom capability using perturbation theory, 
                        3D fractal raymarching, 50+ coloring algorithms, and 1000+ preset locations.
                    </p>
                    
                    <div class="about-section">
                        <h4>Technologies</h4>
                        <ul class="tech-list">
                            <li>Perturbation Theory (K.I. Martin, SuperFractalThing)</li>
                            <li>Series Approximation (Claude Heiland-Allen, Kalles Fraktaler)</li>
                            <li>Arbitrary Precision (Decimal.js)</li>
                            <li>Three.js for 3D WebGL rendering</li>
                            <li>Custom GLSL shaders</li>
                            <li>Web Workers for multi-threaded rendering</li>
                        </ul>
                    </div>
                    
                    <div class="about-section">
                        <h4>Mathematical Credits</h4>
                        <ul class="credits-list">
                            <li><strong>Mandelbrot Set</strong> â€” Benoit Mandelbrot (1980)</li>
                            <li><strong>Julia Sets</strong> â€” Gaston Julia (1918)</li>
                            <li><strong>Smooth Iteration</strong> â€” Linas Vepstas (1997)</li>
                            <li><strong>Triangle Inequality Average</strong> â€” Kerry Mitchell</li>
                            <li><strong>Orbit Traps</strong> â€” Clifford Pickover</li>
                            <li><strong>Mandelbulb</strong> â€” Daniel White & Paul Nylander (2009)</li>
                            <li><strong>Mandelbox</strong> â€” Tom Lowe (2010)</li>
                        </ul>
                    </div>
                    
                    <div class="about-links">
                        <a href="https://github.com/abyss-explorer" target="_blank" rel="noopener" class="about-link">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                            GitHub Repository
                        </a>
                        <a href="https://abyss-explorer.github.io/docs" target="_blank" rel="noopener" class="about-link">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
                                <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                            </svg>
                            Documentation
                        </a>
                        <a href="https://abyss-explorer.github.io/changelog" target="_blank" rel="noopener" class="about-link">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                            </svg>
                            Changelog
                        </a>
                    </div>
                    
                    <div class="about-license">
                        <p>Released under the <strong>MIT License</strong></p>
                        <p class="copyright">Â© 2024 Abyss Explorer Contributors</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PALETTE EDITOR MODAL
         Advanced gradient/palette customization
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-palette" 
        class="modal" 
        role="dialog" 
        aria-labelledby="palette-title" 
        aria-modal="true"
        hidden
    >
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-content modal-lg">
            <header class="modal-header">
                <h2 id="palette-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2.69l5.66 5.66a8 8 0 11-11.31 0z"/>
                    </svg>
                    Palette Editor
                </h2>
                <button class="modal-close" data-close-modal aria-label="Close palette editor">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Gradient Canvas -->
                <div class="gradient-editor">
                    <canvas 
                        id="gradient-canvas" 
                        class="gradient-canvas" 
                        width="700" 
                        height="50"
                        role="img"
                        aria-label="Gradient preview - click to add color stops"
                    ></canvas>
                    
                    <!-- Color Stops Container -->
                    <div class="color-stops" id="color-stops" aria-label="Color stop markers">
                        <!-- Color stop markers dynamically inserted here -->
                    </div>
                </div>
                
                <!-- Stop Editor Panel -->
                <div class="stop-editor" id="stop-editor">
                    <h3>
                        <span>Selected Stop</span>
                        <span class="stop-index" id="stop-index">#1</span>
                    </h3>
                    
                    <div class="stop-editor-content">
                        <div class="control-group">
                            <label for="stop-color" class="control-label">Color</label>
                            <div class="color-input-group">
                                <input type="color" id="stop-color" class="control-color large" value="#6366f1">
                                <input type="text" id="stop-color-hex" class="control-input mono" value="#6366f1" pattern="^#[0-9A-Fa-f]{6}$">
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">RGB</label>
                            <div class="rgb-inputs">
                                <div class="input-with-label">
                                    <label for="stop-r">R</label>
                                    <input type="number" id="stop-r" class="control-input narrow" min="0" max="255" value="99">
                                </div>
                                <div class="input-with-label">
                                    <label for="stop-g">G</label>
                                    <input type="number" id="stop-g" class="control-input narrow" min="0" max="255" value="102">
                                </div>
                                <div class="input-with-label">
                                    <label for="stop-b">B</label>
                                    <input type="number" id="stop-b" class="control-input narrow" min="0" max="255" value="241">
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">HSL</label>
                            <div class="hsl-inputs">
                                <div class="input-with-label">
                                    <label for="stop-h">H</label>
                                    <input type="number" id="stop-h" class="control-input narrow" min="0" max="360" value="239">
                                </div>
                                <div class="input-with-label">
                                    <label for="stop-s">S</label>
                                    <input type="number" id="stop-s" class="control-input narrow" min="0" max="100" value="84">
                                </div>
                                <div class="input-with-label">
                                    <label for="stop-l">L</label>
                                    <input type="number" id="stop-l" class="control-input narrow" min="0" max="100" value="67">
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label for="stop-position" class="control-label">
                                <span>Position</span>
                                <span class="label-value" id="stop-position-display">50%</span>
                            </label>
                            <input type="range" id="stop-position" class="control-range" min="0" max="1" step="0.001" value="0.5">
                        </div>
                        
                        <button id="btn-delete-stop" class="btn btn-danger btn-sm">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                            Delete Stop
                        </button>
                    </div>
                </div>
                
                <!-- Palette Actions -->
                <div class="palette-actions">
                    <div class="palette-action-group">
                        <button id="btn-add-stop" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 8v8M8 12h8"/>
                            </svg>
                            Add Stop
                        </button>
                        
                        <button id="btn-equalize-stops" class="btn btn-secondary" title="Distribute stops evenly">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10H3M21 14H3M12 6v12"/>
                            </svg>
                            Equalize
                        </button>
                        
                        <button id="btn-reverse-gradient" class="btn btn-secondary" title="Reverse gradient direction">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/>
                            </svg>
                            Reverse
                        </button>
                    </div>
                    
                    <div class="palette-action-group">
                        <button id="btn-import-palette" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            Import
                        </button>
                        
                        <button id="btn-export-palette" class="btn btn-secondary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                            Export
                        </button>
                        
                        <button id="btn-randomize-gradient" class="btn btn-secondary" title="Generate random palette">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="4" y="4" width="6" height="6" rx="1"/>
                                <rect x="14" y="4" width="6" height="6" rx="1"/>
                                <rect x="4" y="14" width="6" height="6" rx="1"/>
                                <rect x="14" y="14" width="6" height="6" rx="1"/>
                            </svg>
                            Random
                        </button>
                    </div>
                </div>
                
                <!-- Interpolation Settings -->
                <div class="control-group">
                    <label for="palette-interp-editor" class="control-label">
                        <span>Color Interpolation</span>
                        <button class="info-btn" data-tooltip="The color space used for blending between stops. OKLAB produces the most perceptually uniform gradients.">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/>
                            </svg>
                        </button>
                    </label>
                    <div class="interpolation-options">
                        <button class="interp-btn" data-interp="rgb">RGB</button>
                        <button class="interp-btn active" data-interp="hsl">HSL</button>
                        <button class="interp-btn" data-interp="hsv">HSV</button>
                        <button class="interp-btn" data-interp="lab">LAB</button>
                        <button class="interp-btn" data-interp="oklab">OKLAB</button>
                        <button class="interp-btn" data-interp="oklch">OKLCH</button>
                    </div>
                </div>
                
                <!-- Preview with Fractal -->
                <div class="palette-preview-section">
                    <label class="control-label">Preview on Fractal</label>
                    <canvas id="palette-preview-fractal" width="280" height="200"></canvas>
                </div>
            </div>
            
            <footer class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>Cancel</button>
                <button class="btn btn-primary" id="btn-apply-palette">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Apply Palette
                </button>
            </footer>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         FULL GALLERY MODAL
         Browse and search all preset locations
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div 
        id="modal-gallery" 
        class="modal modal-fullscreen" 
        role="dialog" 
        aria-labelledby="gallery-modal-title" 
        aria-modal="true"
        hidden
    >
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="gallery-modal-title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    Gallery
                    <span class="gallery-count-badge" id="gallery-modal-count">1000+ locations</span>
                </h2>
                
                <div class="gallery-modal-search">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input 
                        type="text" 
                        id="gallery-modal-search" 
                        class="control-input" 
                        placeholder="Search by name, description, coordinates..."
                        aria-label="Search gallery"
                    >
                </div>
                
                <button class="modal-close" data-close-modal aria-label="Close gallery">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </header>
            
            <div class="modal-body">
                <!-- Filters -->
                <div class="gallery-modal-filters">
                    <div class="filter-section">
                        <span class="filter-label">Fractal Type:</span>
                        <div class="filter-chips" role="group">
                            <button class="filter-chip active" data-filter="all" aria-pressed="true">All</button>
                            <button class="filter-chip" data-filter="mandelbrot" aria-pressed="false">Mandelbrot</button>
                            <button class="filter-chip" data-filter="julia" aria-pressed="false">Julia</button>
                            <button class="filter-chip" data-filter="burning-ship" aria-pressed="false">Burning Ship</button>
                            <button class="filter-chip" data-filter="tricorn" aria-pressed="false">Tricorn</button>
                            <button class="filter-chip" data-filter="celtic" aria-pressed="false">Celtic</button>
                            <button class="filter-chip" data-filter="newton" aria-pressed="false">Newton</button>
                            <button class="filter-chip" data-filter="3d" aria-pressed="false">3D Fractals</button>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <span class="filter-label">Zoom Depth:</span>
                        <div class="filter-chips" role="group">
                            <button class="filter-chip zoom-filter active" data-zoom="all" aria-pressed="true">Any</button>
                            <button class="filter-chip zoom-filter" data-zoom="shallow" aria-pressed="false">< 10^10</button>
                            <button class="filter-chip zoom-filter" data-zoom="deep" aria-pressed="false">10^10 - 10^100</button>
                            <button class="filter-chip zoom-filter" data-zoom="very-deep" aria-pressed="false">10^100 - 10^500</button>
                            <button class="filter-chip zoom-filter" data-zoom="ultra-deep" aria-pressed="false">> 10^500</button>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <span class="filter-label">Category:</span>
                        <div class="filter-chips" role="group">
                            <button class="filter-chip cat-filter active" data-cat="all" aria-pressed="true">All</button>
                            <button class="filter-chip cat-filter" data-cat="famous" aria-pressed="false">Famous</button>
                            <button class="filter-chip cat-filter" data-cat="spirals" aria-pressed="false">Spirals</button>
                            <button class="filter-chip cat-filter" data-cat="mini-brots" aria-pressed="false">Mini-brots</button>
                            <button class="filter-chip cat-filter" data-cat="seahorses" aria-pressed="false">Seahorses</button>
                            <button class="filter-chip cat-filter" data-cat="elephants" aria-pressed="false">Elephants</button>
                            <button class="filter-chip cat-filter" data-cat="dendrites" aria-pressed="false">Dendrites</button>
                            <button class="filter-chip cat-filter" data-cat="geometric" aria-pressed="false">Geometric</button>
                            <button class="filter-chip cat-filter" data-cat="bookmarks" aria-pressed="false">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                                </svg>
                                My Bookmarks
                            </button>
                        </div>
                    </div>
                    
                    <div class="filter-section sort-section">
                        <span class="filter-label">Sort by:</span>
                        <select id="gallery-modal-sort" class="control-select compact">
                            <option value="featured">Featured</option>
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="name-desc">Name (Z-A)</option>
                            <option value="zoom-asc">Zoom (Low â†’ High)</option>
                            <option value="zoom-desc">Zoom (High â†’ Low)</option>
                            <option value="newest">Recently Added</option>
                            <option value="popular">Most Popular</option>
                        </select>
                    </div>
                </div>
                
                <!-- Gallery Grid -->
                <div class="gallery-modal-grid" id="gallery-modal-grid" role="listbox">
                    <!-- Gallery items populated dynamically -->
                    <div class="gallery-loading">
                        <div class="loading-spinner"></div>
                        <span>Loading gallery...</span>
                    </div>
                </div>
                
                <!-- Load More -->
                <div class="gallery-load-more" id="gallery-load-more">
                    <button id="btn-load-more" class="btn btn-secondary btn-lg">
                        Load More
                        <span class="load-more-count">(showing 50 of 1000+)</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         CONTEXT MENU
         Right-click menu for canvas
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="context-menu" class="context-menu" role="menu" hidden>
        <button class="context-menu-item" role="menuitem" data-action="zoom-here">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35M11 8v6M8 11h6"/>
            </svg>
            <span>Zoom Here (2Ã—)</span>
        </button>
        <button class="context-menu-item" role="menuitem" data-action="zoom-here-deep">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
                <circle cx="11" cy="11" r="3"/>
            </svg>
            <span>Deep Zoom (10Ã—)</span>
        </button>
        <button class="context-menu-item" role="menuitem" data-action="center-here">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="1"/>
                <path d="M12 2v4M12 18v4M2 12h4M18 12h4"/>
            </svg>
            <span>Center Here</span>
        </button>
        
        <div class="context-menu-divider"></div>
        
        <button class="context-menu-item" role="menuitem" data-action="julia-here">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="4"/>
                <circle cx="12" cy="12" r="1"/>
            </svg>
            <span>Julia Set at This Point</span>
            <kbd class="context-shortcut">J</kbd>
        </button>
        <button class="context-menu-item" role="menuitem" data-action="orbit-here">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2"/>
                <path d="M12 18c3.314 0 6-2.686 6-6s-2.686-6-6-6"/>
                <circle cx="12" cy="12" r="2"/>
            </svg>
            <span>Show Orbit</span>
        </button>
        
        <div class="context-menu-divider"></div>
        
        <button class="context-menu-item" role="menuitem" data-action="copy-coords">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2"/>
                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
            </svg>
            <span>Copy Coordinates</span>
            <kbd class="context-shortcut">Ctrl+C</kbd>
        </button>
        <button class="context-menu-item" role="menuitem" data-action="copy-link">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/>
            </svg>
            <span>Copy Link to Here</span>
        </button>
        
        <div class="context-menu-divider"></div>
        
        <button class="context-menu-item" role="menuitem" data-action="bookmark">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
            </svg>
            <span>Bookmark This Location</span>
            <kbd class="context-shortcut">B</kbd>
        </button>
        <button class="context-menu-item" role="menuitem" data-action="screenshot">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
                <circle cx="12" cy="13" r="4"/>
            </svg>
            <span>Quick Screenshot</span>
            <kbd class="context-shortcut">P</kbd>
        </button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MATH INFO PANEL
         Slide-out panel with mathematical background information
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <aside id="info-panel" class="info-panel" role="complementary" aria-labelledby="info-panel-title" hidden>
        <header class="info-panel-header">
            <h2 id="info-panel-title">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
                    <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                </svg>
                <span id="info-panel-fractal-name">Mandelbrot Set</span>
            </h2>
            <button class="info-panel-close" aria-label="Close info panel">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
        </header>
        
        <div class="info-panel-content" id="info-panel-content">
            <!-- Content dynamically populated based on current fractal -->
            <section class="info-section">
                <h3>Definition</h3>
                <p id="info-definition">The Mandelbrot set is the set of complex numbers c for which the function f<sub>c</sub>(z) = zÂ² + c does not diverge when iterated from z = 0.</p>
            </section>
            
            <section class="info-section">
                <h3>Formula</h3>
                <div class="formula-display" id="info-formula">
                    z<sub>n+1</sub> = z<sub>n</sub>Â² + c
                </div>
            </section>
            
            <section class="info-section">
                <h3>Properties</h3>
                <ul id="info-properties">
                    <li>The set is connected and simply connected</li>
                    <li>The boundary has Hausdorff dimension 2</li>
                    <li>It is self-similar at all scales</li>
                    <li>Contains infinitely many "mini-Mandelbrot" copies</li>
                </ul>
            </section>
            
            <section class="info-section">
                <h3>History</h3>
                <p id="info-history">First visualized by Robert W. Brooks and Peter Matelski in 1978. Named after Benoit Mandelbrot, who studied and popularized it in 1980.</p>
            </section>
            
            <section class="info-section">
                <h3>References</h3>
                <ul id="info-references" class="references-list">
                    <li><a href="#">Mandelbrot, B. (1980). Fractal aspects of the iteration of z â†’ Î»z(1-z)</a></li>
                    <li><a href="#">Douady, A. & Hubbard, J. (1982). ItÃ©ration des polynÃ´mes quadratiques complexes</a></li>
                </ul>
            </section>
        </div>
    </aside>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         BOOKMARKS PANEL
         Side panel showing saved locations
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <aside id="bookmarks-panel" class="slide-panel slide-panel-left" role="complementary" hidden>
        <header class="slide-panel-header">
            <h2>
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                </svg>
                Bookmarks
                <span class="panel-count" id="bookmarks-panel-count">(0)</span>
            </h2>
            <button class="slide-panel-close" aria-label="Close bookmarks">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
        </header>
        
        <div class="slide-panel-search">
            <input type="text" id="bookmarks-search" class="control-input" placeholder="Search bookmarks...">
        </div>
        
        <div class="slide-panel-content" id="bookmarks-list">
            <div class="empty-state">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                </svg>
                <p>No bookmarks yet</p>
                <p class="empty-hint">Press <kbd>B</kbd> to bookmark the current view</p>
            </div>
        </div>
        
        <footer class="slide-panel-footer">
            <button id="btn-export-bookmarks" class="btn btn-sm btn-secondary">Export</button>
            <button id="btn-import-bookmarks" class="btn btn-sm btn-secondary">Import</button>
            <button id="btn-clear-all-bookmarks" class="btn btn-sm btn-outline-danger">Clear All</button>
        </footer>
    </aside>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         HISTORY PANEL
         Side panel showing navigation history
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <aside id="history-panel" class="slide-panel slide-panel-left" role="complementary" hidden>
        <header class="slide-panel-header">
            <h2>
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                History
                <span class="panel-count" id="history-panel-count">(0)</span>
            </h2>
            <button class="slide-panel-close" aria-label="Close history">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
        </header>
        
        <div class="slide-panel-content" id="history-list">
            <div class="empty-state">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                <p>No history yet</p>
                <p class="empty-hint">Start exploring to build up history</p>
            </div>
        </div>
        
        <footer class="slide-panel-footer">
            <button id="btn-clear-history" class="btn btn-sm btn-outline-danger">Clear History</button>
        </footer>
    </aside>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         ORBIT VISUALIZER
         Overlay for showing orbit paths
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="orbit-overlay" class="orbit-overlay" hidden>
        <canvas id="orbit-canvas" class="orbit-canvas"></canvas>
        <div class="orbit-info">
            <span class="orbit-label">Orbit of point:</span>
            <span class="orbit-point mono" id="orbit-point">(-0.5, 0)</span>
            <span class="orbit-iterations" id="orbit-iterations">0 iterations</span>
            <button class="orbit-close" aria-label="Close orbit visualization">Ã—</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         DEVELOPER CONSOLE (Debug Mode)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="dev-console" class="dev-console" hidden>
        <header class="dev-console-header">
            <span>Developer Console</span>
            <button class="dev-console-close">Ã—</button>
        </header>
        <div class="dev-console-output" id="dev-console-output"></div>
        <div class="dev-console-input">
            <span class="prompt">></span>
            <input type="text" id="dev-console-input" class="mono" placeholder="Enter command...">
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
         â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•
         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
         â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•    â–ˆâ–ˆâ•‘   â•šâ•â•â•â•â–ˆâ–ˆâ•‘
         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
         â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•šâ•â•        â•šâ•â•   â•šâ•â•â•â•â•â•â•
         
         External Libraries and Application Scripts
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         EXTERNAL LIBRARIES (deferred loading for performance)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <!-- Three.js - 3D WebGL Library (for 3D fractals) -->
    <script 
        src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" 
        defer
        integrity="sha512-dLxUelApnYxpLt6K2iomGngnHO83iUvZytA3YjDUCjT0HDOHKXnVYdf3hU4JjM8uEhxf9nD1/ey98U3t2vZ0qQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
    ></script>
    
    <!-- Decimal.js - Arbitrary Precision Math (for ultra-deep zooms) -->
    <script 
        src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/10.4.3/decimal.min.js" 
        defer
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
    ></script>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         APPLICATION SCRIPTS (ES6 Modules)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script type="module">
        /**
         * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         * â•‘                    ABYSS EXPLORER - Main Entry Point                   â•‘
         * â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
         * â•‘  This script initializes the fractal explorer application.            â•‘
         * â•‘                                                                        â•‘
         * â•‘  Module Architecture:                                                  â•‘
         * â•‘  â”œâ”€â”€ js/app.js              - Main application controller             â•‘
         * â•‘  â”œâ”€â”€ js/core/                - Core functionality                      â•‘
         * â•‘  â”‚   â”œâ”€â”€ state.js           - Application state management            â•‘
         * â•‘  â”‚   â”œâ”€â”€ events.js          - Event bus and handlers                  â•‘
         * â•‘  â”‚   â””â”€â”€ config.js          - Configuration and defaults              â•‘
         * â•‘  â”œâ”€â”€ js/math/               - Mathematical utilities                   â•‘
         * â•‘  â”‚   â”œâ”€â”€ complex.js         - Complex number operations               â•‘
         * â•‘  â”‚   â”œâ”€â”€ decimal-complex.js - Arbitrary precision complex             â•‘
         * â•‘  â”‚   â””â”€â”€ perturbation.js    - Perturbation theory implementation      â•‘
         * â•‘  â”œâ”€â”€ js/fractals2d/         - 2D fractal implementations              â•‘
         * â•‘  â”œâ”€â”€ js/fractals3d/         - 3D fractal distance functions           â•‘
         * â•‘  â”œâ”€â”€ js/deep/               - Deep zoom algorithms                    â•‘
         * â•‘  â”‚   â”œâ”€â”€ reference.js       - Reference orbit calculation             â•‘
         * â•‘  â”‚   â”œâ”€â”€ series-approx.js   - Series approximation                    â•‘
         * â•‘  â”‚   â””â”€â”€ glitch-detect.js   - Glitch detection and correction         â•‘
         * â•‘  â”œâ”€â”€ js/render/             - Rendering engines                       â•‘
         * â•‘  â”‚   â”œâ”€â”€ renderer-2d.js     - Canvas 2D renderer                      â•‘
         * â•‘  â”‚   â”œâ”€â”€ renderer-webgl.js  - WebGL 2D renderer                       â•‘
         * â•‘  â”‚   â””â”€â”€ renderer-3d.js     - Three.js 3D renderer                    â•‘
         * â•‘  â”œâ”€â”€ js/shaders/            - GLSL shader sources                     â•‘
         * â•‘  â”œâ”€â”€ js/coloring/           - Coloring algorithms                     â•‘
         * â•‘  â”œâ”€â”€ js/workers/            - Web Worker scripts                      â•‘
         * â•‘  â”œâ”€â”€ js/ui/                 - User interface controllers              â•‘
         * â•‘  â”œâ”€â”€ js/camera/             - Camera and navigation                   â•‘
         * â•‘  â”œâ”€â”€ js/export/             - Image and video export                  â•‘
         * â•‘  â”œâ”€â”€ js/history/            - Undo/redo and navigation history        â•‘
         * â•‘  â”œâ”€â”€ js/data/               - Preset locations and palettes           â•‘
         * â•‘  â””â”€â”€ js/utils/              - Utility functions                       â•‘
         * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */
        
        // Import main application class
        import { App } from './js/main.js';
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INITIALIZATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * Wait for DOM to be fully loaded before initializing
         */
        document.addEventListener('DOMContentLoaded', async () => {
            // Get loading screen elements
            const loadingScreen = document.getElementById('loading-screen');
            const loadingStatus = document.getElementById('loading-status');
            const loadingProgressBar = document.getElementById('loading-progress-bar');
            
            /**
             * Update loading progress
             * @param {string} message - Status message to display
             * @param {number} progress - Progress percentage (0-100)
             */
            const updateLoadingProgress = (message, progress) => {
                if (loadingStatus) loadingStatus.textContent = message;
                if (loadingProgressBar) loadingProgressBar.style.width = `${progress}%`;
            };
            
            /**
             * Handle loading errors
             * @param {Error} error - The error that occurred
             */
            const handleLoadingError = (error) => {
                console.error('Failed to initialize Abyss Explorer:', error);
                if (loadingStatus) {
                    loadingStatus.textContent = `Error: ${error.message}`;
                    loadingStatus.style.color = '#ef4444';
                }
            };
            
            try {
                updateLoadingProgress('Initializing core modules...', 10);
                
                // Create main application instance
                const app = new App();
                window.AbyssExplorer = app;
                
                updateLoadingProgress('Setting up canvas...', 30);
                
                // Initialize the app
                await app.init();
                
                updateLoadingProgress('Ready!', 100);
                
                // Fade out loading screen
                loadingScreen.classList.add('hidden');
                
                // Remove loading screen from DOM after animation
                setTimeout(() => {
                    loadingScreen.remove();
                }, 500);
                
                console.log('%cğŸŒ€ Abyss Explorer v1.0.0 Ready', 
                    'color: #6366f1; font-size: 14px; font-weight: bold;');
                console.log('%cExplore the infinite depths of mathematical beauty.', 
                    'color: #a1a1aa;');
                console.log('%cPress ? for keyboard shortcuts.', 
                    'color: #a1a1aa;');
                
            } catch (error) {
                handleLoadingError(error);
            }
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // URL HASH CHANGE HANDLER
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * Handle URL hash changes for deep linking
         */
        window.addEventListener('hashchange', () => {
            if (window.AbyssExplorer && window.location.hash) {
                window.AbyssExplorer.loadFromHash(window.location.hash);
            }
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // GLOBAL EVENT HANDLERS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * Prevent default browser zoom (Ctrl+Scroll)
         * The application handles its own zoom behavior
         */
        document.addEventListener('wheel', (event) => {
            if (event.ctrlKey) {
                event.preventDefault();
            }
        }, { passive: false });
        
        /**
         * Prevent default browser context menu on canvas
         * (We provide our own context menu)
         */
        document.getElementById('fractal-canvas-2d')?.addEventListener('contextmenu', (event) => {
            event.preventDefault();
        });
        
        document.getElementById('fractal-canvas-3d')?.addEventListener('contextmenu', (event) => {
            event.preventDefault();
        });
        
        /**
         * Handle keyboard shortcuts at document level
         */
        document.addEventListener('keydown', (event) => {
            // Let the app handle keyboard events
            if (window.AbyssExplorer) {
                window.AbyssExplorer.handleKeyDown(event);
            }
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SERVICE WORKER REGISTRATION (for offline support)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/sw.js', {
                        scope: '/'
                    });
                    console.log('ServiceWorker registered:', registration.scope);
                } catch (error) {
                    console.log('ServiceWorker registration failed:', error);
                }
            });
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // PERFORMANCE MONITORING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * Report Web Vitals for performance monitoring
         */
        if (window.performance && window.performance.getEntriesByType) {
            window.addEventListener('load', () => {
                // Log navigation timing
                const perfEntries = performance.getEntriesByType('navigation');
                if (perfEntries.length > 0) {
                    const timing = perfEntries[0];
                    console.log(`Page load: ${Math.round(timing.loadEventEnd - timing.startTime)}ms`);
                }
            });
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ERROR BOUNDARY
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * Global error handler for uncaught errors
         */
        window.addEventListener('error', (event) => {
            console.error('Uncaught error:', event.error);
            
            // Notify user of critical errors
            if (window.AbyssExplorer?.toast) {
                window.AbyssExplorer.toast.show('An error occurred. Please refresh the page.', 'error');
            }
        });
        
        /**
         * Global handler for unhandled promise rejections
         */
        window.addEventListener('unhandledrejection', (event) => {
            console.error('Unhandled promise rejection:', event.reason);
        });
    </script>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         NOSCRIPT FALLBACK
         Displayed when JavaScript is disabled
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <noscript>
        <div style="
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: #0a0a0f;
            color: #e4e4e7;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            text-align: center;
            padding: 2rem;
        ">
            <div style="max-width: 400px;">
                <svg style="width: 64px; height: 64px; margin-bottom: 1.5rem; color: #6366f1;" viewBox="0 0 48 48" fill="none">
                    <circle cx="24" cy="24" r="22" stroke="currentColor" stroke-width="2"/>
                    <circle cx="24" cy="24" r="14" stroke="currentColor" stroke-width="2" opacity="0.5"/>
                    <circle cx="24" cy="24" r="6" fill="currentColor"/>
                </svg>
                <h1 style="font-size: 1.5rem; margin-bottom: 1rem; font-weight: 600;">
                    JavaScript Required
                </h1>
                <p style="color: #a1a1aa; line-height: 1.6;">
                    Abyss Explorer requires JavaScript to render fractals and provide an interactive experience.
                    <br><br>
                    Please enable JavaScript in your browser settings and reload the page.
                </p>
            </div>
        </div>
    </noscript>
</body>
</html>
